<div class="d-flex justify-content-center">
  <div class="col-8">
    <form name="editForm" novalidate (ngSubmit)="save()" [formGroup]="editForm">
      <h2 id="jhi-fiche-hemophilie-heading" data-cy="FicheHemophilieCreateUpdateHeading">Créer ou éditer une Fiche Hemophilie</h2>

      <div>
        <jhi-alert-error></jhi-alert-error>

        @if (editForm.controls.id.value !== null) {
          <div class="mb-3">
            <label class="form-label" for="field_id">ID</label>
            <input type="number" class="form-control" name="id" id="field_id" data-cy="id" formControlName="id" [readonly]="true" />
          </div>
        }


       <div class="accordion" id="ficheAccordion">
          <!-- Accordéon Section 1: Identification -->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingIdentification">
              <button
                class="accordion-button"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseIdentification"
                aria-expanded="true"
                aria-controls="collapseIdentification"
              >
                Identification
              </button>
            </h2>
            <div
              id="collapseIdentification"
              class="accordion-collapse collapse show"
              aria-labelledby="headingIdentification"
              data-bs-parent="#ficheAccordion"
            >
              <div class="accordion-body">
                <!-- Champs pour la section Identification -->
                
        <div class="mb-3">
          <label class="form-label" for="field_dossierNumber">Numéro de dossier</label>
          <input
            type="text"
            class="form-control"
            name="dossierNumber"
            id="field_dossierNumber"
            data-cy="dossierNumber"
            formControlName="dossierNumber"
          />
        </div>

        @let ordreNumberRef = editForm.get('ordreNumber')!;
        <div class="mb-3">
          <label class="form-label" for="field_ordreNumber">Numéro d'ordre</label>
          <input
            type="text"
            class="form-control"
            name="ordreNumber"
            id="field_ordreNumber"
            data-cy="ordreNumber"
            formControlName="ordreNumber"
          />
          @if (ordreNumberRef.invalid && (ordreNumberRef.dirty || ordreNumberRef.touched)) {
            <div>
              @if (editForm.get('ordreNumber')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let indexNumberRef = editForm.get('indexNumber')!;
        <div class="mb-3">
          <label class="form-label" for="field_indexNumber">Numéro d'index</label>
          <input
            type="text"
            class="form-control"
            name="indexNumber"
            id="field_indexNumber"
            data-cy="indexNumber"
            formControlName="indexNumber"
          />
          @if (indexNumberRef.invalid && (indexNumberRef.dirty || indexNumberRef.touched)) {
            <div>
              @if (editForm.get('indexNumber')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let prenomRef = editForm.get('prenom')!;
        <div class="mb-3">
          <label class="form-label" for="field_prenom">Prénom</label>
          <input type="text" class="form-control" name="prenom" id="field_prenom" data-cy="prenom" formControlName="prenom" />
          @if (prenomRef.invalid && (prenomRef.dirty || prenomRef.touched)) {
            <div>
              @if (editForm.get('prenom')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let nomRef = editForm.get('nom')!;
        <div class="mb-3">
          <label class="form-label" for="field_nom">Nom</label>
          <input type="text" class="form-control" name="nom" id="field_nom" data-cy="nom" formControlName="nom" />
          @if (nomRef.invalid && (nomRef.dirty || nomRef.touched)) {
            <div>
              @if (editForm.get('nom')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let nomJeuneFilleRef = editForm.get('nomJeuneFille')!;
        <div class="mb-3">
          <label class="form-label" for="field_nomJeuneFille">Nom de Jeune Fille</label>
          <input
            type="text"
            class="form-control"
            name="nomJeuneFille"
            id="field_nomJeuneFille"
            data-cy="nomJeuneFille"
            formControlName="nomJeuneFille"
          />
          @if (nomJeuneFilleRef.invalid && (nomJeuneFilleRef.dirty || nomJeuneFilleRef.touched)) {
            <div>
              @if (editForm.get('nomJeuneFille')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let professionRef = editForm.get('profession')!;
        <div class="mb-3">
          <label class="form-label" for="field_profession">Profession</label>
          <input
            type="text"
            class="form-control"
            name="profession"
            id="field_profession"
            data-cy="profession"
            formControlName="profession"
          />
          @if (professionRef.invalid && (professionRef.dirty || professionRef.touched)) {
            <div>
              @if (editForm.get('profession')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let etatCivilRef = editForm.get('etatCivil')!;
        <div class="mb-3">
          <label class="form-label" for="field_etatCivil">Etat Civil</label>
          <select class="form-control" name="etatCivil" formControlName="etatCivil" id="field_etatCivil" data-cy="etatCivil">
            <option [ngValue]="null"></option>
            @for (civilStatus of civilStatusValues; track $index) {
              <option [value]="civilStatus">
                {{ { null: '', CELIBATAIRE: 'CELIBATAIRE', MARIE: 'MARIE', DIVORCE: 'DIVORCE', NP: 'NP' }[civilStatus] }}
              </option>
            }
          </select>
          @if (etatCivilRef.invalid && (etatCivilRef.dirty || etatCivilRef.touched)) {
            <div>
              @if (editForm.get('etatCivil')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let serviceCliniqueRef = editForm.get('serviceClinique')!;
        <div class="mb-3">
          <label class="form-label" for="field_serviceClinique">Service Clinique</label>
          <select
            class="form-control"
            name="serviceClinique"
            formControlName="serviceClinique"
            id="field_serviceClinique"
            data-cy="serviceClinique"
          >
            <option [ngValue]="null"></option>
            @for (serviceCliniqueType of serviceCliniqueTypeValues; track $index) {
              <option [value]="serviceCliniqueType">
                {{
                  {
                    null: '',
                    HTO: 'HTO',
                    PRIVE: 'PRIVE',
                    PEDIATRIE_A: 'PEDIATRIE_A',
                    PEDIATRIE_B: 'PEDIATRIE_B',
                    PUR: 'PUR',
                    GYNECO: 'GYNECO',
                    AUTRE: 'AUTRE',
                  }[serviceCliniqueType]
                }}
              </option>
            }
          </select>
          @if (serviceCliniqueRef.invalid && (serviceCliniqueRef.dirty || serviceCliniqueRef.touched)) {
            <div>
              @if (editForm.get('serviceClinique')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let autreServiceCliniqueRef = editForm.get('autreServiceClinique')!;
        <div class="mb-3">
          <label class="form-label" for="field_autreServiceClinique">Autre Service Clinique</label>
          <input
            type="text"
            class="form-control"
            name="autreServiceClinique"
            id="field_autreServiceClinique"
            data-cy="autreServiceClinique"
            formControlName="autreServiceClinique"
          />
          @if (autreServiceCliniqueRef.invalid && (autreServiceCliniqueRef.dirty || autreServiceCliniqueRef.touched)) {
            <div>
              @if (editForm.get('autreServiceClinique')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 255 caractères.</small>
              }
            </div>
          }
        </div>

        @let couvertureSocialeRef = editForm.get('couvertureSociale')!;
        <div class="mb-3">
          <label class="form-label" for="field_couvertureSociale">Couverture Sociale</label>
          <select
            class="form-control"
            name="couvertureSociale"
            formControlName="couvertureSociale"
            id="field_couvertureSociale"
            data-cy="couvertureSociale"
          >
            <option [ngValue]="null"></option>
            @for (couvertureSociale of couvertureSocialeValues; track $index) {
              <option [value]="couvertureSociale">
                {{ { null: '', CNAM: 'CNAM', INDIGENT: 'INDIGENT', NP: 'NP' }[couvertureSociale] }}
              </option>
            }
          </select>
          @if (couvertureSocialeRef.invalid && (couvertureSocialeRef.dirty || couvertureSocialeRef.touched)) {
            <div>
              @if (editForm.get('couvertureSociale')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let sexeRef = editForm.get('sexe')!;
        <div class="mb-3">
          <label class="form-label" for="field_sexe">Sexe</label>
          <select class="form-control" name="sexe" formControlName="sexe" id="field_sexe" data-cy="sexe">
            <option [ngValue]="null"></option>
            @for (gender of genderValues; track $index) {
              <option [value]="gender">{{ { null: '', MASCULIN: 'MASCULIN', FEMININ: 'FEMININ' }[gender] }}</option>
            }
          </select>
          @if (sexeRef.invalid && (sexeRef.dirty || sexeRef.touched)) {
            <div>
              @if (editForm.get('sexe')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_dateNaissance">Date de Naissance</label>
          <div class="input-group">
            <input
              id="field_dateNaissance"
              data-cy="dateNaissance"
              type="text"
              class="form-control"
              name="dateNaissance"
              ngbDatepicker
              #dateNaissanceDp="ngbDatepicker"
              formControlName="dateNaissance"
            />
            <button type="button" class="btn btn-secondary" (click)="dateNaissanceDp.toggle()">
              <fa-icon icon="calendar-alt"></fa-icon>
            </button>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_ageActuel">Age Actuel</label>
          <input type="number" class="form-control" name="ageActuel" id="field_ageActuel" data-cy="ageActuel" formControlName="ageActuel" readonly/>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_origine">Origine</label>
          <select class="form-control" name="origine" formControlName="origine" id="field_origine" data-cy="origine">
            <option [ngValue]="null"></option>
            @for (region of regionValues; track $index) {
              <option [value]="region">
                {{
                  {
                    null: '',
                    SFAX: 'SFAX',
                    GABES: 'GABES',
                    GAFSA: 'GAFSA',
                    KEBILI: 'KEBILI',
                    TOZEUR: 'TOZEUR',
                    MEDNINE: 'MEDNINE',
                    TATAOUINE: 'TATAOUINE',
                    SBZ: 'SBZ',
                    KASSERINE: 'KASSERINE',
                    MAHDIA: 'MAHDIA',
                    KAIRAOUANE: 'KAIRAOUANE',
                    MONASTIR: 'MONASTIR',
                    SOUSSE: 'SOUSSE',
                    AUTRE: 'AUTRE',
                  }[region]
                }}
              </option>
            }
          </select>
        </div>

        @let autreOrigineRef = editForm.get('autreOrigine')!;
        <div class="mb-3">
          <label class="form-label" for="field_autreOrigine">Autre Origine</label>
          <input
            type="text"
            class="form-control"
            name="autreOrigine"
            id="field_autreOrigine"
            data-cy="autreOrigine"
            formControlName="autreOrigine"
          />
          @if (autreOrigineRef.invalid && (autreOrigineRef.dirty || autreOrigineRef.touched)) {
            <div>
              @if (editForm.get('autreOrigine')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let adresseRef = editForm.get('adresse')!;
        <div class="mb-3">
          <label class="form-label" for="field_adresse">Adresse</label>
          <input type="text" class="form-control" name="adresse" id="field_adresse" data-cy="adresse" formControlName="adresse" />
          @if (adresseRef.invalid && (adresseRef.dirty || adresseRef.touched)) {
            <div>
              @if (editForm.get('adresse')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let telephoneRef = editForm.get('telephone')!;
        <div class="mb-3">
          <label class="form-label" for="field_telephone">Téléphone</label>
          <input type="text" class="form-control" name="telephone" id="field_telephone" data-cy="telephone" formControlName="telephone" />
          @if (telephoneRef.invalid && (telephoneRef.dirty || telephoneRef.touched)) {
            <div>
              @if (editForm.get('telephone')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 20 caractères.</small>
              }
            </div>
          }
        </div>

        @let prenomPereRef = editForm.get('prenomPere')!;
        <div class="mb-3">
          <label class="form-label" for="field_prenomPere">Prénom Père</label>
          <input
            type="text"
            class="form-control"
            name="prenomPere"
            id="field_prenomPere"
            data-cy="prenomPere"
            formControlName="prenomPere"
          />
          @if (prenomPereRef.invalid && (prenomPereRef.dirty || prenomPereRef.touched)) {
            <div>
              @if (editForm.get('prenomPere')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let professionPereRef = editForm.get('professionPere')!;
        <div class="mb-3">
          <label class="form-label" for="field_professionPere">Profession Père</label>
          <input
            type="text"
            class="form-control"
            name="professionPere"
            id="field_professionPere"
            data-cy="professionPere"
            formControlName="professionPere"
          />
          @if (professionPereRef.invalid && (professionPereRef.dirty || professionPereRef.touched)) {
            <div>
              @if (editForm.get('professionPere')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let nomPrenomMereRef = editForm.get('nomPrenomMere')!;
        <div class="mb-3">
          <label class="form-label" for="field_nomPrenomMere">Nom Prénom Mère</label>
          <input
            type="text"
            class="form-control"
            name="nomPrenomMere"
            id="field_nomPrenomMere"
            data-cy="nomPrenomMere"
            formControlName="nomPrenomMere"
          />
          @if (nomPrenomMereRef.invalid && (nomPrenomMereRef.dirty || nomPrenomMereRef.touched)) {
            <div>
              @if (editForm.get('nomPrenomMere')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let professionMereRef = editForm.get('professionMere')!;
        <div class="mb-3">
          <label class="form-label" for="field_professionMere">Profession Mère</label>
          <input
            type="text"
            class="form-control"
            name="professionMere"
            id="field_professionMere"
            data-cy="professionMere"
            formControlName="professionMere"
          />
          @if (professionMereRef.invalid && (professionMereRef.dirty || professionMereRef.touched)) {
            <div>
              @if (editForm.get('professionMere')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let medecinTraitantRef = editForm.get('medecinTraitant')!;
        <div class="mb-3">
          <label class="form-label" for="field_medecinTraitant">Médecin Traitant</label>
          <input
            type="text"
            class="form-control"
            name="medecinTraitant"
            id="field_medecinTraitant"
            data-cy="medecinTraitant"
            formControlName="medecinTraitant"
          />
          @if (medecinTraitantRef.invalid && (medecinTraitantRef.dirty || medecinTraitantRef.touched)) {
            <div>
              @if (editForm.get('medecinTraitant')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let serviceOrigineRef = editForm.get('serviceOrigine')!;
        <div class="mb-3">
          <label class="form-label" for="field_serviceOrigine">Service Origine</label>
          <input
            type="text"
            class="form-control"
            name="serviceOrigine"
            id="field_serviceOrigine"
            data-cy="serviceOrigine"
            formControlName="serviceOrigine"
          />
          @if (serviceOrigineRef.invalid && (serviceOrigineRef.dirty || serviceOrigineRef.touched)) {
            <div>
              @if (editForm.get('serviceOrigine')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let biologisteResponsableDgRef = editForm.get('biologisteResponsableDg')!;
        <div class="mb-3">
          <label class="form-label" for="field_biologisteResponsableDg">Biologiste Responsable Dg</label>
          <input
            type="text"
            class="form-control"
            name="biologisteResponsableDg"
            id="field_biologisteResponsableDg"
            data-cy="biologisteResponsableDg"
            formControlName="biologisteResponsableDg"
          />
          @if (biologisteResponsableDgRef.invalid && (biologisteResponsableDgRef.dirty || biologisteResponsableDgRef.touched)) {
            <div>
              @if (editForm.get('biologisteResponsableDg')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let diagnosticRef = editForm.get('diagnostic')!;
        <div class="mb-3">
          <label class="form-label" for="field_diagnostic">Diagnostic</label>
          <select class="form-control" name="diagnostic" formControlName="diagnostic" id="field_diagnostic" data-cy="diagnostic">
            <option [ngValue]="null"></option>
            @for (diagnosticType of diagnosticTypeValues; track $index) {
              <option [value]="diagnosticType">
                {{
                  {
                    null: '',
                    HEMOPHILIE: 'HEMOPHILIE',
                    WILLEBRAND: 'WILLEBRAND',
                    THROMBOPATHIE: 'THROMBOPATHIE',
                    DEFICIT_FACTEUR_VII: 'DEFICIT_FACTEUR_VII',
                    DEFICIT_FACTEUR_XI: 'DEFICIT_FACTEUR_XI',
                    DEFICIT_FACTEUR_XIII: 'DEFICIT_FACTEUR_XIII',
                    DEFICIT_COMBINE: 'DEFICIT_COMBINE',
                    AUTRE: 'AUTRE',
                  }[diagnosticType]
                }}
              </option>
            }
          </select>
          @if (diagnosticRef.invalid && (diagnosticRef.dirty || diagnosticRef.touched)) {
            <div>
              @if (editForm.get('diagnostic')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let autreDiagnosticRef = editForm.get('autreDiagnostic')!;
        <div class="mb-3">
          <label class="form-label" for="field_autreDiagnostic">Autre Diagnostic</label>
          <input
            type="text"
            class="form-control"
            name="autreDiagnostic"
            id="field_autreDiagnostic"
            data-cy="autreDiagnostic"
            formControlName="autreDiagnostic"
          />
          @if (autreDiagnosticRef.invalid && (autreDiagnosticRef.dirty || autreDiagnosticRef.touched)) {
            <div>
              @if (editForm.get('autreDiagnostic')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_anneeDiagnostic">Année Diagnostic</label>
          <input
            type="number"
            class="form-control"
            name="anneeDiagnostic"
            id="field_anneeDiagnostic"
            data-cy="anneeDiagnostic"
            formControlName="anneeDiagnostic"
          />
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_dateEnregistrementRegistre">Date Enregistrement Registre</label>
          <div class="input-group">
            <input
              id="field_dateEnregistrementRegistre"
              data-cy="dateEnregistrementRegistre"
              type="text"
              class="form-control"
              name="dateEnregistrementRegistre"
              ngbDatepicker
              #dateEnregistrementRegistreDp="ngbDatepicker"
              formControlName="dateEnregistrementRegistre"
            />
            <button type="button" class="btn btn-secondary" (click)="dateEnregistrementRegistreDp.toggle()">
              <fa-icon icon="calendar-alt"></fa-icon>
            </button>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_consentementRegistre">Consentement Registre</label>
          <select
            class="form-control"
            name="consentementRegistre"
            formControlName="consentementRegistre"
            id="field_consentementRegistre"
            data-cy="consentementRegistre"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

                
              </div>
            </div>
          </div>


<!-- Accordéon Section 2: Antécédents -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingAntecedents">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseAntecedents"
      aria-expanded="false"
      aria-controls="collapseAntecedents"
    >
      Antécédents
    </button>
  </h2>
  <div
    id="collapseAntecedents"
    class="accordion-collapse collapse"
    aria-labelledby="headingAntecedents"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Antécédents -->

                
<div class="mb-3 d-flex align-items-end gap-3">
  <!-- Parents Consanguins -->
  <div>
    <label class="form-label" for="field_parentsConsanguins">Parents Consanguins</label>
    <select
      class="form-control"
      name="parentsConsanguins"
      formControlName="parentsConsanguins"
      id="field_parentsConsanguins"
      data-cy="parentsConsanguins"
    >
      <option [ngValue]="null"></option>
      @for (ouiNonNP of ouiNonNPValues; track $index) {
        <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
      }
    </select>
  </div>

  <!-- Degré de Parenté (affiché uniquement si OUI est sélectionné) -->
  @if (editForm.get('parentsConsanguins')?.value === 'OUI') {
    @let degreParenteConsanguinsRef = editForm.get('degreParenteConsanguins')!;
    <div>
      <label class="form-label" for="field_degreParenteConsanguins">Degré Parenté Consanguins</label>
      <select
        class="form-control"
        name="degreParenteConsanguins"
        id="field_degreParenteConsanguins"
        data-cy="degreParenteConsanguins"
        formControlName="degreParenteConsanguins"
      >
        <option [ngValue]="null"></option>
        <option value="3ème">3ème</option>
        <option value="4ème">4ème</option>
        <option value="5ème">5ème</option>
        <option value="6ème">6ème</option>
      </select>
      @if (degreParenteConsanguinsRef.invalid && (degreParenteConsanguinsRef.dirty || degreParenteConsanguinsRef.touched)) {
        <div>
          @if (editForm.get('degreParenteConsanguins')?.errors?.maxlength) {
            <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
          }
        </div>
      }
    </div>
  }
</div>


<div class="mb-3 d-flex align-items-end gap-3">
  <!-- Cas Similaires -->
  <div class="flex-fill">
    <select
      class="form-control"
      name="casSimilaires"
      formControlName="casSimilaires"
      id="field_casSimilaires"
      data-cy="casSimilaires"
    >
      <option [ngValue]="null" disabled selected hidden>Cas Similaires</option>
      @for (ouiNonNP of ouiNonNPValues; track $index) {
        <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
      }
    </select>
  </div>

  <!-- Champs conditionnels affichés uniquement si "Cas Similaires" == OUI -->
  @if (editForm.get('casSimilaires')?.value === 'OUI') {
    <!-- Nombre Cas -->
    <div class="flex-fill">
      <input
        type="number"
        class="form-control"
        name="nombreCas"
        id="field_nombreCas"
        data-cy="nombreCas"
        formControlName="nombreCas"
        placeholder="Nombre Cas"
      />
    </div>

    <!-- Degré Parenté Cas Similaires -->
    <div class="flex-fill">
      <select
        class="form-control"
        name="degreParenteCasSimilaires"
        formControlName="degreParenteCasSimilaires"
        id="field_degreParenteCasSimilaires"
        data-cy="degreParenteCasSimilaires"
      >
        <option [ngValue]="null" disabled selected hidden>Degré Parenté</option>
        @for (degreeParente of degreeParenteValues; track $index) {
          <option [value]="degreeParente">
            {{ { null: '', FRERE: 'FRERE', COUSIN: 'COUSIN', LOINTAIN: 'LOINTAIN' }[degreeParente] }}
          </option>
        }
      </select>
    </div>
  }
</div>


 <div class="mb-3 d-flex align-items-end gap-3">
  <!-- Décès Syndrome Hémorragique -->
  <div class="flex-fill">
    <select
      class="form-control"
      name="decesSyndromeHemorragique"
      formControlName="decesSyndromeHemorragique"
      id="field_decesSyndromeHemorragique"
      data-cy="decesSyndromeHemorragique"
    >
      <option [ngValue]="null" disabled selected hidden>Décès Syndrome Hémorragique</option>
      @for (ouiNonNP of ouiNonNPValues; track $index) {
        <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
      }
    </select>
  </div>

  <!-- Nombre Décès (visible seulement si OUI) -->
  @if (editForm.get('decesSyndromeHemorragique')?.value === 'OUI') {
    <div class="flex-fill">
      <input
        type="number"
        class="form-control"
        name="nombreDeces"
        id="field_nombreDeces"
        data-cy="nombreDeces"
        formControlName="nombreDeces"
        placeholder="Nombre Décès"
      />
    </div>
  }
</div>


        <div class="mb-3">
          <label class="form-label" for="field_formeHemophilie">Forme Hemophilie</label>
          <select
            class="form-control"
            name="formeHemophilie"
            formControlName="formeHemophilie"
            id="field_formeHemophilie"
            data-cy="formeHemophilie"
          >
            <option [ngValue]="null"></option>
            @for (formeHemophilie of formeHemophilieValues; track $index) {
              <option [value]="formeHemophilie">
                {{ { null: '', SPORADIQUE: 'SPORADIQUE', HEREDITAIRE: 'HEREDITAIRE', NP: 'NP' }[formeHemophilie] }}
              </option>
            }
          </select>
        </div>

<div class="mb-3">
  <label class="form-label">Fratrie</label>
  <div class="d-flex gap-3">
    <!-- Nombre de Frères -->
    <input
      type="number"
      class="form-control"
      name="fratrieNbFreres"
      id="field_fratrieNbFreres"
      data-cy="fratrieNbFreres"
      formControlName="fratrieNbFreres"
      placeholder="Nb Frères"
    />

    <!-- Nombre de Sœurs -->
    <input
      type="number"
      class="form-control"
      name="fratrieNbSoeurs"
      id="field_fratrieNbSoeurs"
      data-cy="fratrieNbSoeurs"
      formControlName="fratrieNbSoeurs"
      placeholder="Nb Sœurs"
    />
  </div>
</div>


          </div>
  </div>
</div>


          <!-- Accordéon Section 3: Circonstances de découverte -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingCirconstances">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseCirconstances"
      aria-expanded="false"
      aria-controls="collapseCirconstances"
    >
      Circonstances de découverte
    </button>
  </h2>
  <div
    id="collapseCirconstances"
    class="accordion-collapse collapse"
    aria-labelledby="headingCirconstances"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Circonstances de découverte -->

@let circonstancesDecouverteRef = editForm.get('circonstancesDecouverte')!;

<div class="mb-3">
  <label class="form-label" for="field_circonstancesDecouverte">Circonstances Découverte</label>
  <select
    class="form-control"
    name="circonstancesDecouverte"
    formControlName="circonstancesDecouverte"
    id="field_circonstancesDecouverte"
    data-cy="circonstancesDecouverte"
  >
    <option [ngValue]="null" disabled selected hidden>Choisir une circonstance</option>
    <option value="FORTUITE">Découverte fortuite</option>
    <option value="FAMILIALE">Enquête familiale</option>
    <option value="SYNDROME_HEMORRAGIQUE">Exploration d’un syndrome hémorragique</option>
  </select>
  @if (circonstancesDecouverteRef.invalid && (circonstancesDecouverteRef.dirty || circonstancesDecouverteRef.touched)) {
    <div>
      @if (editForm.get('circonstancesDecouverte')?.errors?.required) {
        <small class="form-text text-danger">Ce champ est obligatoire.</small>
      }
    </div>
  }
</div>

<!-- Afficher les checkboxes seulement si SYNDROME_HEMORRAGIQUE est sélectionné -->
@if (editForm.get('circonstancesDecouverte')?.value === 'SYNDROME_HEMORRAGIQUE') {
  <div class="mb-3">
    <label class="form-label">Manifestations hémorragiques</label>
    <div class="d-flex flex-wrap gap-4">
      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="field_cutaneoMuqueux" formControlName="cutaneoMuqueux" />
        <label for="field_cutaneoMuqueux" class="form-check-label">Cutanéo-muqueux</label>
      </div>

      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="field_hemarthrose" formControlName="hemarthrose" />
        <label for="field_hemarthrose" class="form-check-label">Hémarthrose</label>
      </div>

      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="field_hematomePostTraumatique" formControlName="hematomePostTraumatique" />
        <label for="field_hematomePostTraumatique" class="form-check-label">Hématome post-traumatique</label>
      </div>

      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="field_plaiePostTraumatique" formControlName="plaiePostTraumatique" />
        <label for="field_plaiePostTraumatique" class="form-check-label">Plaie post-traumatique</label>
      </div>

      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="field_hemorragiePostCirconcision" formControlName="hemorragiePostCirconcision" />
        <label for="field_hemorragiePostCirconcision" class="form-check-label">Hémorragie post-circoncision</label>
      </div>

      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="field_hemorragiePostChirurgie" formControlName="hemorragiePostChirurgie" />
        <label for="field_hemorragiePostChirurgie" class="form-check-label">Hémorragie post-chirurgie</label>
      </div>

      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="field_hemorragieCerebrale" formControlName="hemorragieCerebrale" />
        <label for="field_hemorragieCerebrale" class="form-check-label">Hémorragie cérébrale</label>
      </div>

      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="field_hemorragieDigestive" formControlName="hemorragieDigestive" />
        <label for="field_hemorragieDigestive" class="form-check-label">Hémorragie digestive</label>
      </div>
    </div>
  </div>
}


        <div class="mb-3">
          <label class="form-label" for="field_datePremierSigneClinique">Date Premier Signe Clinique</label>
          <div class="input-group">
            <input
              id="field_datePremierSigneClinique"
              data-cy="datePremierSigneClinique"
              type="text"
              class="form-control"
              name="datePremierSigneClinique"
              ngbDatepicker
              #datePremierSigneCliniqueDp="ngbDatepicker"
              formControlName="datePremierSigneClinique"
            />
            <button type="button" class="btn btn-secondary" (click)="datePremierSigneCliniqueDp.toggle()">
              <fa-icon icon="calendar-alt"></fa-icon>
            </button>
          </div>
        </div>

<div class="mb-3">
  <label class="form-label">Âge au diagnostic</label>
  <div class="d-flex gap-3 flex-wrap">
    <input
      type="number"
      class="form-control"
      name="ageDiagnosticJours"
      id="field_ageDiagnosticJours"
      data-cy="ageDiagnosticJours"
      formControlName="ageDiagnosticJours"
      placeholder="Jours"
    />

    <input
      type="number"
      class="form-control"
      name="ageDiagnosticMois"
      id="field_ageDiagnosticMois"
      data-cy="ageDiagnosticMois"
      formControlName="ageDiagnosticMois"
      placeholder="Mois"
    />

    <input
      type="number"
      class="form-control"
      name="ageDiagnosticAnnees"
      id="field_ageDiagnosticAnnees"
      data-cy="ageDiagnosticAnnees"
      formControlName="ageDiagnosticAnnees"
      placeholder="Années"
    />
  </div>
</div>



    </div>
  </div>
</div>

<!-- Accordéon Section 4: Biologie au moment du diagnostic -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingBiologie">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseBiologie"
      aria-expanded="false"
      aria-controls="collapseBiologie"
    >
      Biologie au moment du diagnostic
    </button>
  </h2>
  <div
    id="collapseBiologie"
    class="accordion-collapse collapse"
    aria-labelledby="headingBiologie"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Biologie -->


      
        <div class="mb-3">
          <label class="form-label" for="field_dateTestConfirmation">Date Test Confirmation</label>
          <div class="input-group">
            <input
              id="field_dateTestConfirmation"
              data-cy="dateTestConfirmation"
              type="text"
              class="form-control"
              name="dateTestConfirmation"
              ngbDatepicker
              #dateTestConfirmationDp="ngbDatepicker"
              formControlName="dateTestConfirmation"
            />
            <button type="button" class="btn btn-secondary" (click)="dateTestConfirmationDp.toggle()">
              <fa-icon icon="calendar-alt"></fa-icon>
            </button>
          </div>
        </div>

      <div class="mb-2">
  <label class="fw-bold d-block">Hémogramme :</label>
</div>

      
<div class="mb-3">
  <div class="row">
    <div class="col">
      <label class="form-label" for="field_hb">Hb (g/dl)</label>
      <input
        type="number"
        class="form-control"
        name="hb"
        id="field_hb"
        data-cy="hb"
        formControlName="hb"
      />
    </div>
    <div class="col">
      <label class="form-label" for="field_ht">Ht  (%)</label>
      <input
        type="number"
        class="form-control"
        name="ht"
        id="field_ht"
        data-cy="ht"
        formControlName="ht"
      />
    </div>
    <div class="col">
      <label class="form-label" for="field_plaquettes">Plaquettes (/mm3) </label>
      <input
        type="number"
        class="form-control"
        name="plaquettes"
        id="field_plaquettes"
        data-cy="plaquettes"
        formControlName="plaquettes"
      />
    </div>
  </div>
</div>

              <div class="mb-3">
          <label class="form-label" for="field_ts">TS / PFA</label>
          <select class="form-control" name="ts" formControlName="ts" id="field_ts" data-cy="ts">
            <option [ngValue]="null"></option>
            @for (testStatus of testStatusValues; track $index) {
              <option [value]="testStatus">
                {{ { null: '', FAIT: 'FAIT', NON_FAIT: 'NON_FAIT', NORMAL: 'NORMAL', ALLONGE: 'ALLONGE' }[testStatus] }}
              </option>
            }
          </select>
        </div>


      <div class="mb-2">
  <label class="fw-bold d-block">Bilan d’hémostase :</label>
</div>

<div class="row mb-3">
  <!-- TP -->
  <div class="col-md-6">
    <label class="form-label" for="field_tp">TP (%)</label>
    <input
      type="number"
      class="form-control"
      name="tp"
      id="field_tp"
      data-cy="tp"
      formControlName="tp"
    />
  </div>

  <!-- Fibrinogène -->
  <div class="col-md-6">
    <label class="form-label" for="field_fibrinogene">Fibrinogène (g/l)</label>
    <input
      type="number"
      class="form-control"
      name="fibrinogene"
      id="field_fibrinogene"
      data-cy="fibrinogene"
      formControlName="fibrinogene"
    />
  </div>
</div>


<div class="row mb-3">
  <!-- TCA (M/T) -->
  <div class="col-md-6">
    <label class="form-label" for="field_tcaMT">TCA (sec)</label>
    <input
      type="number"
      class="form-control"
      name="tcaMT"
      id="field_tcaMT"
      data-cy="tcaMT"
      formControlName="tcaMT"
    />
  </div>

  <!-- TCA (M+T) -->
  <div class="col-md-6">
    <label class="form-label" for="field_tcaMTTotal">TCA (M+T) (sec)</label>
    <input
      type="number"
      class="form-control"
      name="tcaMTTotal"
      id="field_tcaMTTotal"
      data-cy="tcaMTTotal"
      formControlName="tcaMTTotal"
    />
  </div>
</div>

<!--div class="row mb-3">
  
  <div class="col-md-6">
    <label class="form-label" for="field_tcaMT2h">TCA (M+T) 2h (sec)</label>
    <input
      type="number"
      class="form-control"
      name="tcaMT2h"
      id="field_tcaMT2h"
      data-cy="tcaMT2h"
      formControlName="tcaMT2h"
    />
  </div>


  <div class="col-md-6">
    <label class="form-label" for="field_tcaTemoin2h">TCA (Témoin) 2h (sec)</label>
    <input
      type="number"
      class="form-control"
      name="tcaTemoin2h"
      id="field_tcaTemoin2h"
      data-cy="tcaTemoin2h"
      formControlName="tcaTemoin2h"
    />
  </div>
    </div-->




        <!--div class="mb-3">
          <label class="form-label" for="field_pfa">PFA</label>
          <select class="form-control" name="pfa" formControlName="pfa" id="field_pfa" data-cy="pfa">
            <option [ngValue]="null"></option>
            @for (testStatus of testStatusValues; track $index) {
              <option [value]="testStatus">
                {{ { null: '', FAIT: 'FAIT', NON_FAIT: 'NON_FAIT', NORMAL: 'NORMAL', ALLONGE: 'ALLONGE' }[testStatus] }}
              </option>
            }
          </select>
    </div-->

        <div class="mb-3">
          <label class="form-label" for="field_dosageFacteurVIII">Dosage Facteur VIII (%)</label>
          <input
            type="number"
            class="form-control"
            name="dosageFacteurVIII"
            id="field_dosageFacteurVIII"
            data-cy="dosageFacteurVIII"
            formControlName="dosageFacteurVIII"
          />
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_dosageFacteurIX">Dosage Facteur IX (%)</label>
          <input
            type="number"
            class="form-control"
            name="dosageFacteurIX"
            id="field_dosageFacteurIX"
            data-cy="dosageFacteurIX"
            formControlName="dosageFacteurIX"
          />
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_dosageFacteurVWActivite">Dosage Facteur vW Activité (%)</label>
          <input
            type="number"
            class="form-control"
            name="dosageFacteurVWActivite"
            id="field_dosageFacteurVWActivite"
            data-cy="dosageFacteurVWActivite"
            formControlName="dosageFacteurVWActivite"
          />
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_dosageFacteurVWAntigene">Dosage Facteur vW Antigène (%) </label>
          <input
            type="number"
            class="form-control"
            name="dosageFacteurVWAntigene"
            id="field_dosageFacteurVWAntigene"
            data-cy="dosageFacteurVWAntigene"
            formControlName="dosageFacteurVWAntigene"
          />
        </div>

        @let formeCliniqueRef = editForm.get('formeClinique')!;
        <div class="mb-3">
          <label class="form-label" for="field_formeClinique">Forme Clinique</label>
          <select
            class="form-control"
            name="formeClinique"
            formControlName="formeClinique"
            id="field_formeClinique"
            data-cy="formeClinique"
          >
            <option [ngValue]="null"></option>
            @for (formeClinique of formeCliniqueValues; track $index) {
              <option [value]="formeClinique">{{ { null: '', A: 'A', B: 'B' }[formeClinique] }}</option>
            }
          </select>
          @if (formeCliniqueRef.invalid && (formeCliniqueRef.dirty || formeCliniqueRef.touched)) {
            <div>
              @if (editForm.get('formeClinique')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let severiteRef = editForm.get('severite')!;
        <div class="mb-3">
          <label class="form-label" for="field_severite">Severite</label>
          <select class="form-control" name="severite" formControlName="severite" id="field_severite" data-cy="severite">
            <option [ngValue]="null"></option>
            @for (severite of severiteValues; track $index) {
              <option [value]="severite">{{ { null: '', SEVERE: 'SEVERE', MODEREE: 'MODEREE', MINEURE: 'MINEURE' }[severite] }}</option>
            }
          </select>
          @if (severiteRef.invalid && (severiteRef.dirty || severiteRef.touched)) {
            <div>
              @if (editForm.get('severite')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

<!-- Exploration Moléculaire -->
<div class="mb-3">
  <label class="form-label" for="field_explorationMoleculaire">Exploration Moléculaire</label>
  <select
    class="form-control"
    name="explorationMoleculaire"
    formControlName="explorationMoleculaire"
    id="field_explorationMoleculaire"
    data-cy="explorationMoleculaire"
  >
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">
        {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
      </option>
    }
  </select>
</div>

<!-- Champs conditionnels si "OUI" -->
@if (editForm.get('explorationMoleculaire')?.value === 'OUI') {
  <!-- Inversion Intron 22 : checkbox avant le label -->
  <div class="mb-3 d-flex align-items-center">
    <input
      type="checkbox"
      class="form-check-input"
      name="inversionIntron22"
      id="field_inversionIntron22"
      data-cy="inversionIntron22"
      formControlName="inversionIntron22"
    />
    <label class="form-label ms-2 mb-0" for="field_inversionIntron22">
      Inversion Intron 22
    </label>
  </div>

  <!-- Autre Exploration Moléculaire -->
  @let autreExplorationMoleculaireRef = editForm.get('autreExplorationMoleculaire')!;
  <div class="mb-3">
    <label class="form-label" for="field_autreExplorationMoleculaire">Autre Exploration Moléculaire</label>
    <input
      type="text"
      class="form-control"
      name="autreExplorationMoleculaire"
      id="field_autreExplorationMoleculaire"
      data-cy="autreExplorationMoleculaire"
      formControlName="autreExplorationMoleculaire"
    />
    @if (autreExplorationMoleculaireRef.invalid && (autreExplorationMoleculaireRef.dirty || autreExplorationMoleculaireRef.touched)) {
      <div>
        @if (autreExplorationMoleculaireRef.errors?.maxlength) {
          <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
        }
      </div>
    }
  </div>
}




    </div>
  </div>
</div>

<!-- Accordéon Section 5: Manifestations cliniques -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingManifestations">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseManifestations"
      aria-expanded="false"
      aria-controls="collapseManifestations"
    >
      Manifestations cliniques
    </button>
  </h2>
  <div
    id="collapseManifestations"
    class="accordion-collapse collapse"
    aria-labelledby="headingManifestations"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      

<div class="mb-3">
  <label class="form-label fw-bold" for="field_hemarthroseMC">1 - Hémarthrose</label>
  <select
    class="form-control"
    name="hemarthroseMC"
    formControlName="hemarthroseMC"
    id="field_hemarthroseMC"
    data-cy="hemarthroseMC"
  >
    <option [ngValue]="null" disabled selected hidden>Choisir une option</option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

@if (editForm.get('hemarthroseMC')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label">Détails Hémarthrose</label>

    <!-- Conteneur global pour Siège + Type -->
    <div class="d-flex flex-wrap gap-3">
      
      <!-- Sièges (checkboxes) -->
      <div class="flex-fill">
        <div class="form-label mb-2">Siège</div>
        <div class="d-flex flex-wrap gap-3">
          @for (siege of [
            'Coude droit', 'Coude gauche',
            'Genou droit', 'Genou gauche',
            'Cheville droite', 'Cheville gauche',
            'Épaule droite', 'Épaule gauche',
            'Poignet droit', 'Poignet gauche',
            'Hanche droite', 'Hanche gauche'
          ]; track $index) {
            <div class="form-check d-flex align-items-center gap-2">
              <input
                type="checkbox"
                class="form-check-input"
                [value]="siege"
                (change)="onSiegeChange($event)"
                [checked]="editForm.get('hemarthroseSiege')?.value?.includes(siege)"
              />
              <label class="form-check-label">{{ siege }}</label>
            </div>
          }
        </div>
      </div>

      <!-- Type -->
      <div class="flex-fill d-flex flex-column">
        <label for="field_hemarthroseType" class="form-label">Type</label>
        <select
          class="form-control"
          name="hemarthroseType"
          formControlName="hemarthroseType"
          id="field_hemarthroseType"
          data-cy="hemarthroseType"
        >
          <option [ngValue]="null" disabled selected hidden>Type</option>
          @for (typeManifestation of typeManifestationValues; track $index) {
            <option [value]="typeManifestation">
              {{ { null: '', SPONTANE: 'Spontané', PROVOQUE: 'Provoqué' }[typeManifestation] }}
            </option>
          }
        </select>
      </div>

    </div>
  </div>
}



        <!--div class="mb-3">
          <label class="form-label" for="field_hemarthroseFrequenceAn">Hemarthrose Frequence An</label>
          <input
            type="number"
            class="form-control"
            name="hemarthroseFrequenceAn"
            id="field_hemarthroseFrequenceAn"
            data-cy="hemarthroseFrequenceAn"
            formControlName="hemarthroseFrequenceAn"
          />
    </div-->

<!-- Champ principal -->
<div class="mb-3">
  <label class="form-label fw-bold" for="field_hematomeSuperficiel">2 - Hématome superficiel</label>
  <select
    class="form-control"
    name="hematomeSuperficiel"
    formControlName="hematomeSuperficiel"
    id="field_hematomeSuperficiel"
    data-cy="hematomeSuperficiel"
  >
    <option [ngValue]="null" disabled selected hidden>Choisir une option</option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">
        {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
      </option>
    }
  </select>
</div>

<!-- Champs conditionnels -->
@if (editForm.get('hematomeSuperficiel')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label">Détails Hématome superficiel</label>
    <div class="d-flex flex-wrap gap-3">

      <!-- Type -->
      <div class="flex-fill d-flex flex-column">
        <label for="field_hematomeSuperficielType" class="form-label">Type</label>
        <select
          class="form-control"
          name="hematomeSuperficielType"
          formControlName="hematomeSuperficielType"
          id="field_hematomeSuperficielType"
          data-cy="hematomeSuperficielType"
        >
          <option [ngValue]="null" disabled selected hidden>Type</option>
          @for (typeManifestation of typeManifestationValues; track $index) {
            <option [value]="typeManifestation">
              {{ { null: '', SPONTANE: 'Spontané', PROVOQUE: 'Provoqué' }[typeManifestation] }}
            </option>
          }
        </select>
      </div>

      <!-- Siège -->
      <div class="flex-fill d-flex flex-column">
        <label class="form-label" for="field_hematomeSuperficielSiege">Siège</label>
        @let hematomeSuperficielSiegeRef = editForm.get('hematomeSuperficielSiege')!;
        <input
          type="text"
          class="form-control"
          name="hematomeSuperficielSiege"
          id="field_hematomeSuperficielSiege"
          data-cy="hematomeSuperficielSiege"
          formControlName="hematomeSuperficielSiege"
          placeholder="Ex : bras, cuisse, dos..."
        />
        @if (hematomeSuperficielSiegeRef.invalid && (hematomeSuperficielSiegeRef.dirty || hematomeSuperficielSiegeRef.touched)) {
          <div>
            @if (hematomeSuperficielSiegeRef.errors?.maxlength) {
              <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
            }
          </div>
        }
      </div>

    </div>
  </div>
}


<!-- Champ principal -->
<div class="mb-3">
  <label class="form-label fw-bold" for="field_hematomePsoas">3 - Hématome du psoas</label>
  <select
    class="form-control"
    name="hematomePsoas"
    formControlName="hematomePsoas"
    id="field_hematomePsoas"
    data-cy="hematomePsoas"
  >
    <option [ngValue]="null" disabled selected hidden>Choisir une option</option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">
        {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
      </option>
    }
  </select>
</div>

<!-- Champs conditionnels -->
@if (editForm.get('hematomePsoas')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label">Détails Hématome du psoas</label>
    <div class="d-flex flex-wrap gap-3">

      <!-- Type -->
      <div class="flex-fill d-flex flex-column">
        <label for="field_hematomePsoasType" class="form-label">Type</label>
        <select
          class="form-control"
          name="hematomePsoasType"
          formControlName="hematomePsoasType"
          id="field_hematomePsoasType"
          data-cy="hematomePsoasType"
        >
          <option [ngValue]="null" disabled selected hidden>Type</option>
          @for (typeHemorragie of typeHemorragieValues; track $index) {
            <option [value]="typeHemorragie">
              {{
                {
                  null: '',
                  CHUTE_DENTAIRE: 'Chute dentaire',
                  PLAIE_LANGUE: 'Plaie langue',
                  GINGIVORRAGIES: 'Gingivorragies',
                  EPISTAXIS: 'Epistaxis',
                  ECHYMOSES: 'Ecchymoses'
                }[typeHemorragie]
              }}
            </option>
          }
        </select>
      </div>

      <!-- Récidive -->
      <div class="flex-fill d-flex flex-column">
        <label for="field_hematomePsoasRecidive" class="form-label">Récidive</label>
        <select
          class="form-control"
          name="hematomePsoasRecidive"
          formControlName="hematomePsoasRecidive"
          id="field_hematomePsoasRecidive"
          data-cy="hematomePsoasRecidive"
        >
          <option [ngValue]="null" disabled selected hidden>Récidive</option>
          @for (ouiNonNP of ouiNonNPValues; track $index) {
            <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
          }
        </select>
      </div>

    </div>
  </div>
}


        <div class="mb-3">
          <label class="form-label" for="field_hemorragiesCutaneoMuqueuses">Hemorragies Cutaneo Muqueuses</label>
          <select
            class="form-control"
            name="hemorragiesCutaneoMuqueuses"
            formControlName="hemorragiesCutaneoMuqueuses"
            id="field_hemorragiesCutaneoMuqueuses"
            data-cy="hemorragiesCutaneoMuqueuses"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_hemorragiesCutaneoMuqueusesTypes">Hemorragies Cutaneo Muqueuses Types</label>
          <select
            class="form-control"
            name="hemorragiesCutaneoMuqueusesTypes"
            formControlName="hemorragiesCutaneoMuqueusesTypes"
            id="field_hemorragiesCutaneoMuqueusesTypes"
            data-cy="hemorragiesCutaneoMuqueusesTypes"
          >
            <option [ngValue]="null"></option>
            @for (typeHemorragieCutaneoMuqueuse of typeHemorragieCutaneoMuqueuseValues; track $index) {
              <option [value]="typeHemorragieCutaneoMuqueuse">
                {{
                  {
                    null: '',
                    CHUTE_DENTAIRE: 'CHUTE_DENTAIRE',
                    PLAIE_LANGUE: 'PLAIE_LANGUE',
                    GINGIVORRAGIES: 'GINGIVORRAGIES',
                    EPISTAXIS: 'EPISTAXIS',
                    ECHYMOSES: 'ECHYMOSES',
                  }[typeHemorragieCutaneoMuqueuse]
                }}
              </option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_hemorragiesCutaneoMuqueusesFrequenceAn">Hemorragies Cutaneo Muqueuses Frequence An</label>
          <input
            type="number"
            class="form-control"
            name="hemorragiesCutaneoMuqueusesFrequenceAn"
            id="field_hemorragiesCutaneoMuqueusesFrequenceAn"
            data-cy="hemorragiesCutaneoMuqueusesFrequenceAn"
            formControlName="hemorragiesCutaneoMuqueusesFrequenceAn"
          />
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_hemorragieVisceres">Hemorragie Visceres</label>
          <select
            class="form-control"
            name="hemorragieVisceres"
            formControlName="hemorragieVisceres"
            id="field_hemorragieVisceres"
            data-cy="hemorragieVisceres"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_hemorragieVisceresType">Hemorragie Visceres Type</label>
          <select
            class="form-control"
            name="hemorragieVisceresType"
            formControlName="hemorragieVisceresType"
            id="field_hemorragieVisceresType"
            data-cy="hemorragieVisceresType"
          >
            <option [ngValue]="null"></option>
            @for (typeHemorragieViscere of typeHemorragieViscereValues; track $index) {
              <option [value]="typeHemorragieViscere">
                {{ { null: '', HEMATEMESE: 'HEMATEMESE', RECTORRAGIE: 'RECTORRAGIE', HEMATURIE: 'HEMATURIE' }[typeHemorragieViscere] }}
              </option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_hemorragieVisceresExploration">Hemorragie Visceres Exploration</label>
          <select
            class="form-control"
            name="hemorragieVisceresExploration"
            formControlName="hemorragieVisceresExploration"
            id="field_hemorragieVisceresExploration"
            data-cy="hemorragieVisceresExploration"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        @let hemorragieVisceresExamenRef = editForm.get('hemorragieVisceresExamen')!;
        <div class="mb-3">
          <label class="form-label" for="field_hemorragieVisceresExamen">Hemorragie Visceres Examen</label>
          <input
            type="text"
            class="form-control"
            name="hemorragieVisceresExamen"
            id="field_hemorragieVisceresExamen"
            data-cy="hemorragieVisceresExamen"
            formControlName="hemorragieVisceresExamen"
          />
          @if (hemorragieVisceresExamenRef.invalid && (hemorragieVisceresExamenRef.dirty || hemorragieVisceresExamenRef.touched)) {
            <div>
              @if (editForm.get('hemorragieVisceresExamen')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_saignementSNC">Saignement SNC</label>
          <select
            class="form-control"
            name="saignementSNC"
            formControlName="saignementSNC"
            id="field_saignementSNC"
            data-cy="saignementSNC"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_saignementSNCEvolution">Saignement SNC Evolution</label>
          <select
            class="form-control"
            name="saignementSNCEvolution"
            formControlName="saignementSNCEvolution"
            id="field_saignementSNCEvolution"
            data-cy="saignementSNCEvolution"
          >
            <option [ngValue]="null"></option>
            @for (evolutionSNC of evolutionSNCValues; track $index) {
              <option [value]="evolutionSNC">{{ { null: '', REGRESSION: 'REGRESSION', DECES: 'DECES' }[evolutionSNC] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_circoncision">Circoncision</label>
          <select class="form-control" name="circoncision" formControlName="circoncision" id="field_circoncision" data-cy="circoncision">
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_circoncisionPreparation">Circoncision Preparation</label>
          <select
            class="form-control"
            name="circoncisionPreparation"
            formControlName="circoncisionPreparation"
            id="field_circoncisionPreparation"
            data-cy="circoncisionPreparation"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_circoncisionSuiteOperatoire">Circoncision Suite Operatoire</label>
          <select
            class="form-control"
            name="circoncisionSuiteOperatoire"
            formControlName="circoncisionSuiteOperatoire"
            id="field_circoncisionSuiteOperatoire"
            data-cy="circoncisionSuiteOperatoire"
          >
            <option [ngValue]="null"></option>
            @for (suiteOperatoire of suiteOperatoireValues; track $index) {
              <option [value]="suiteOperatoire">
                {{ { null: '', SIMPLE: 'SIMPLE', HEMORRAGIQUE: 'HEMORRAGIQUE', NP: 'NP' }[suiteOperatoire] }}
              </option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_circoncisionAge">Circoncision Age</label>
          <input
            type="number"
            class="form-control"
            name="circoncisionAge"
            id="field_circoncisionAge"
            data-cy="circoncisionAge"
            formControlName="circoncisionAge"
          />
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_avulsionDentaire">Avulsion Dentaire</label>
          <select
            class="form-control"
            name="avulsionDentaire"
            formControlName="avulsionDentaire"
            id="field_avulsionDentaire"
            data-cy="avulsionDentaire"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_avulsionDentairePreparation">Avulsion Dentaire Preparation</label>
          <select
            class="form-control"
            name="avulsionDentairePreparation"
            formControlName="avulsionDentairePreparation"
            id="field_avulsionDentairePreparation"
            data-cy="avulsionDentairePreparation"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_interventionChirurgicale">Intervention Chirurgicale</label>
          <select
            class="form-control"
            name="interventionChirurgicale"
            formControlName="interventionChirurgicale"
            id="field_interventionChirurgicale"
            data-cy="interventionChirurgicale"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        @let interventionChirurgicaleTypeRef = editForm.get('interventionChirurgicaleType')!;
        <div class="mb-3">
          <label class="form-label" for="field_interventionChirurgicaleType">Intervention Chirurgicale Type</label>
          <input
            type="text"
            class="form-control"
            name="interventionChirurgicaleType"
            id="field_interventionChirurgicaleType"
            data-cy="interventionChirurgicaleType"
            formControlName="interventionChirurgicaleType"
          />
          @if (
            interventionChirurgicaleTypeRef.invalid && (interventionChirurgicaleTypeRef.dirty || interventionChirurgicaleTypeRef.touched)
          ) {
            <div>
              @if (editForm.get('interventionChirurgicaleType')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_accidentsHemorragiquesGraves">Accidents Hemorragiques Graves</label>
          <select
            class="form-control"
            name="accidentsHemorragiquesGraves"
            formControlName="accidentsHemorragiquesGraves"
            id="field_accidentsHemorragiquesGraves"
            data-cy="accidentsHemorragiquesGraves"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_accidentsHemorragiquesGravesTypes">Accidents Hemorragiques Graves Types</label>
          <select
            class="form-control"
            name="accidentsHemorragiquesGravesTypes"
            formControlName="accidentsHemorragiquesGravesTypes"
            id="field_accidentsHemorragiquesGravesTypes"
            data-cy="accidentsHemorragiquesGravesTypes"
          >
            <option [ngValue]="null"></option>
            @for (typeAccidentHemorragiqueGrave of typeAccidentHemorragiqueGraveValues; track $index) {
              <option [value]="typeAccidentHemorragiqueGrave">
                {{
                  {
                    null: '',
                    HEMATOMES_CEREBRALES: 'HEMATOMES_CEREBRALES',
                    HEMOTHORAX: 'HEMOTHORAX',
                    EDC_HEMORRAGIQUE: 'EDC_HEMORRAGIQUE',
                    HEMATOME_COMPRESSIF: 'HEMATOME_COMPRESSIF',
                  }[typeAccidentHemorragiqueGrave]
                }}
              </option>
            }
          </select>
        </div>

    </div>
  </div>
</div>

<!-- Accordéon Section 6: Prise en charge thérapeutique -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingPriseEnCharge">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapsePriseEnCharge"
      aria-expanded="false"
      aria-controls="collapsePriseEnCharge"
    >
      Prise en charge thérapeutique
    </button>
  </h2>
  <div
    id="collapsePriseEnCharge"
    class="accordion-collapse collapse"
    aria-labelledby="headingPriseEnCharge"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Prise en charge thérapeutique -->


      
<!-- Choix principal -->
<div class="mb-3">
  <label class="form-label fw-bold" for="field_priseEnChargeTherapeutique">Prise en charge thérapeutique</label>
  <select
    class="form-control"
    name="priseEnChargeTherapeutique"
    formControlName="priseEnChargeTherapeutique"
    id="field_priseEnChargeTherapeutique"
    data-cy="priseEnChargeTherapeutique"
  >
    <option [ngValue]="null" disabled selected hidden>Choisir une option</option>
    @for (typePriseEnCharge of typePriseEnChargeValues; track $index) {
      <option [value]="typePriseEnCharge">
        {{ { A_LA_DEMANDE: 'À la demande', PROPHYLAXIE: 'Prophylaxie' }[typePriseEnCharge] }}
      </option>
    }
  </select>
</div>

<!-- Si A_LA_DEMANDE -->
@if (editForm.get('priseEnChargeTherapeutique')?.value === 'A_LA_DEMANDE') {
  <div class="mb-3">
    <input
      type="text"
      class="form-control"
      name="causePriseEnCharge"
      id="field_causePriseEnCharge"
      placeholder="Cause (si à la demande)"
      data-cy="causePriseEnCharge"
      formControlName="causePriseEnCharge"
    />
    @let causePriseEnChargeRef = editForm.get('causePriseEnCharge')!;
    @if (causePriseEnChargeRef.invalid && (causePriseEnChargeRef.dirty || causePriseEnChargeRef.touched)) {
      <div>
        @if (causePriseEnChargeRef.errors?.maxlength) {
          <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
        }
      </div>
    }
  </div>
}

<!-- Si PROPHYLAXIE -->
@if (editForm.get('priseEnChargeTherapeutique')?.value === 'PROPHYLAXIE') {
  <div class="mb-3 d-flex gap-3 flex-wrap align-items-end">
    <!-- Dose / fréquence -->
    <div class="flex-fill">
      <input
        type="text"
        class="form-control"
        name="prophylaxieDoseFrequence"
        id="field_prophylaxieDoseFrequence"
        placeholder="Dose et fréquence (nbre/sem)"
        data-cy="prophylaxieDoseFrequence"
        formControlName="prophylaxieDoseFrequence"
      />
      @let prophylaxieDoseFrequenceRef = editForm.get('prophylaxieDoseFrequence')!;
      @if (prophylaxieDoseFrequenceRef.invalid && (prophylaxieDoseFrequenceRef.dirty || prophylaxieDoseFrequenceRef.touched)) {
        <div>
          @if (prophylaxieDoseFrequenceRef.errors?.maxlength) {
            <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
          }
        </div>
      }
    </div>

    <!-- Date de début -->
    <div class="flex-fill">
      <div class="input-group">
        <input
          id="field_dateDebutProphylaxie"
          data-cy="dateDebutProphylaxie"
          type="text"
          class="form-control"
          placeholder="Date de début de prophylaxie"
          name="dateDebutProphylaxie"
          ngbDatepicker
          #dateDebutProphylaxieDp="ngbDatepicker"
          formControlName="dateDebutProphylaxie"
        />
        <button type="button" class="btn btn-secondary" (click)="dateDebutProphylaxieDp.toggle()">
          <fa-icon icon="calendar-alt"></fa-icon>
        </button>
      </div>
    </div>
  </div>
}


        <div class="mb-3">
          <label class="form-label" for="field_injectionType">Injection Type</label>
          <select
            class="form-control"
            name="injectionType"
            formControlName="injectionType"
            id="field_injectionType"
            data-cy="injectionType"
          >
            <option [ngValue]="null"></option>
            @for (injectionType of injectionTypeValues; track $index) {
              <option [value]="injectionType">
                {{
                  {
                    null: '',
                    AUTO_INJECTION: 'AUTO_INJECTION',
                    INJECTION_PARENT: 'INJECTION_PARENT',
                    INJECTION_HOPITAL: 'INJECTION_HOPITAL',
                  }[injectionType]
                }}
              </option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_modaliteTraitement">Modalité du ttt substitutif</label>
          <select
            class="form-control"
            name="modaliteTraitement"
            formControlName="modaliteTraitement"
            id="field_modaliteTraitement"
            data-cy="modaliteTraitement"
          >
            <option [ngValue]="null"></option>
            @for (modaliteTraitement of modaliteTraitementValues; track $index) {
              <option [value]="modaliteTraitement">
                {{ { null: '', PLASMATIQUE: 'PLASMATIQUE', RECOMBINANT: 'RECOMBINANT' }[modaliteTraitement] }}
              </option>
            }
          </select>
        </div>

        @let typeTraitementSubstitutifRef = editForm.get('typeTraitementSubstitutif')!;
        <div class="mb-3">
          <label class="form-label" for="field_typeTraitementSubstitutif">Type Traitement Substitutif</label>
          <input
            type="text"
            class="form-control"
            name="typeTraitementSubstitutif"
            id="field_typeTraitementSubstitutif"
            data-cy="typeTraitementSubstitutif"
            formControlName="typeTraitementSubstitutif"
          />
          @if (typeTraitementSubstitutifRef.invalid && (typeTraitementSubstitutifRef.dirty || typeTraitementSubstitutifRef.touched)) {
            <div>
              @if (editForm.get('typeTraitementSubstitutif')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_agePremiereSubstitution">Age de la 1ére substitution</label>
          <input
            type="number"
            class="form-control"
            name="agePremiereSubstitution"
            id="field_agePremiereSubstitution"
            data-cy="agePremiereSubstitution"
            formControlName="agePremiereSubstitution"
          />
        </div>

<!-- Champ principal : Antécédents de traitement par PSL -->
<div class="mb-3">
  <label class="form-label fw-bold" for="field_antecedentsTraitementPSL">Antécédents de traitement par des PSL</label>
  <select
    class="form-control"
    name="antecedentsTraitementPSL"
    formControlName="antecedentsTraitementPSL"
    id="field_antecedentsTraitementPSL"
    data-cy="antecedentsTraitementPSL"
  >
    <option [ngValue]="null" disabled selected hidden>Choisir une option</option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Champs conditionnels : PFC + Cryoprécipité -->
@if (editForm.get('antecedentsTraitementPSL')?.value === 'OUI') {
  <div class="mb-3 d-flex flex-wrap gap-3">
    <!-- PFC -->
    <div class="flex-fill">
      <label class="form-label" for="field_plasmaFraisCongele">Plasma frais congelé (PFC)</label>
      <select
        class="form-control"
        name="plasmaFraisCongele"
        formControlName="plasmaFraisCongele"
        id="field_plasmaFraisCongele"
        data-cy="plasmaFraisCongele"
      >
        <option [ngValue]="null" disabled selected hidden>Choisir</option>
        @for (ouiNonNP of ouiNonNPValues; track $index) {
          <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
        }
      </select>
    </div>

    <!-- Cryoprécipité -->
    <div class="flex-fill">
      <label class="form-label" for="field_cryoprecipite">Cryoprécipité</label>
      <select
        class="form-control"
        name="cryoprecipite"
        formControlName="cryoprecipite"
        id="field_cryoprecipite"
        data-cy="cryoprecipite"
      >
        <option [ngValue]="null" disabled selected hidden>Choisir</option>
        @for (ouiNonNP of ouiNonNPValues; track $index) {
          <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
        }
      </select>
    </div>
  </div>
}





    </div>
  </div>
</div>

<!-- Accordéon Section 7: Complications liées au traitement -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingComplications">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseComplications"
      aria-expanded="false"
      aria-controls="collapseComplications"
    >
      Complications liées au traitement
    </button>
  </h2>
  <div
    id="collapseComplications"
    class="accordion-collapse collapse"
    aria-labelledby="headingComplications"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Complications -->


<!-- Champ principal -->
<div class="mb-3">
  <label class="form-label fw-bold" for="field_orthopediques">Orthopédiques</label>
  <select
    class="form-control"
    name="orthopediques"
    formControlName="orthopediques"
    id="field_orthopediques"
    data-cy="orthopediques"
  >
    <option [ngValue]="null" disabled selected hidden>Choisir</option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Si Orthopédiques == OUI -->
@if (editForm.get('orthopediques')?.value === 'OUI') {
  <!-- Types d'atteintes -->
  <div class="mb-3">
    <label class="form-label">Type d’atteintes orthopédiques</label>
    <div class="d-flex flex-wrap gap-3">
      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="synovite" formControlName="synovite" />
        <label for="synovite" class="form-check-label">Synovite</label>
      </div>
      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="arthropathieHemophiliqueChronique" formControlName="arthropathieHemophiliqueChronique" />
        <label for="arthropathieHemophiliqueChronique" class="form-check-label">Arthropathie hémophilique chronique</label>
      </div>
      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="pseudotumeurs" formControlName="pseudotumeurs" />
        <label for="pseudotumeurs" class="form-check-label">Pseudotumeurs</label>
      </div>
      <div class="form-check d-flex align-items-center gap-2">
        <input type="checkbox" class="form-check-input" id="fractures" formControlName="fractures" />
        <label for="fractures" class="form-check-label">Fractures</label>
      </div>
    </div>
  </div>

  <!-- Si Synovite OU Arthropathie cochés -->
  @if (editForm.get('synovite')?.value || editForm.get('arthropathieHemophiliqueChronique')?.value) {
    <!-- Articulations cibles -->
    <div class="mb-3">
      <label class="form-label">Articulations cibles</label>
      <div class="d-flex flex-wrap gap-3">
        @for (articulation of [
          { id: 'genouGauche', label: 'Genou gauche' },
          { id: 'genouDroit', label: 'Genou droit' },
          { id: 'coudeGauche', label: 'Coude gauche' },
          { id: 'coudeDroit', label: 'Coude droit' },
          { id: 'chevilleGauche', label: 'Cheville gauche' },
          { id: 'chevilleDroite', label: 'Cheville droite' }
        ]; track $index) {
          <div class="form-check d-flex align-items-center gap-2">
            <input type="checkbox" class="form-check-input" [id]="'field_' + articulation.id" [formControlName]="articulation.id" />
            <label class="form-check-label" [for]="'field_' + articulation.id">{{ articulation.label }}</label>
          </div>
        }
      </div>
    </div>

    <!-- PEC thérapeutique -->
    <div class="mb-3">
      <label class="form-label" for="field_pecTherapeutique">PEC thérapeutique</label>
      <select
        class="form-control"
        name="pecTherapeutique"
        formControlName="pecTherapeutique"
        id="field_pecTherapeutique"
        data-cy="pecTherapeutique"
      >
        <option [ngValue]="null" disabled selected hidden>Choisir</option>
        @for (pECTherapeutique of pECTherapeutiqueValues; track $index) {
          <option [value]="pECTherapeutique">
            {{ { null: '', RAS: 'RAS', SYNOVIORTHOSE: 'Synoviorthèse', PTG: 'PTG' }[pECTherapeutique] }}
          </option>
        }
      </select>
    </div>
  }
}


<!-- Inhibiteurs -->
<div class="mb-3">
  <label class="form-label fw-bold">2 - Inhibiteurs</label>
  <select
    class="form-control"
    name="inhibiteurs"
    formControlName="inhibiteurs"
    id="field_inhibiteurs"
    data-cy="inhibiteurs"
  >
    <option [ngValue]="null" disabled selected hidden>Choisir</option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'Oui', NON: 'Non', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

@if (editForm.get('inhibiteurs')?.value === 'OUI') {
  <!-- Taux inhibiteur -->
  <div class="mb-3">
    <label class="form-label">Taux d’inhibiteur</label>
    <select
      class="form-control"
      formControlName="tauxInhibiteur"
      id="field_tauxInhibiteur"
    >
      <option [ngValue]="null" disabled selected hidden>Choisir</option>
      @for (taux of tauxInhibiteurValues; track $index) {
        <option [value]="taux">
          {{ { FAIBLE_REPONDEUR: 'Faible répondeur', FORT_REPONDEUR: 'Fort répondeur', NP: 'NP' }[taux] }}
        </option>
      }
    </select>
  </div>

  <!-- Test récupération -->
  <div class="mb-3">
    <label class="form-label">Test de récupération du FAH</label>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" formControlName="testRecuperationFAH" id="testRecuperationFAH" />
      <label class="form-check-label" for="testRecuperationFAH">Fait</label>
    </div>
  </div>

  @if (editForm.get('testRecuperationFAH')?.value) {
    <!-- Date test -->
    <div class="mb-3">
      <label class="form-label">Date du test</label>
      <div class="input-group">
        <input
          type="text"
          class="form-control"
          formControlName="dateTestRecuperation"
          ngbDatepicker
          #dateTestRecuperationDp="ngbDatepicker"
        />
        <button type="button" class="btn btn-outline-secondary" (click)="dateTestRecuperationDp.toggle()">
          <fa-icon icon="calendar-alt"></fa-icon>
        </button>
      </div>
    </div>

    <!-- Taux de récupération -->
    <div class="mb-3">
      <label class="form-label">Taux de récupération</label>
      <select class="form-control" formControlName="tauxRecuperation">
        <option [ngValue]="null" disabled selected hidden>Choisir</option>
        <option value="NORMAL">Normal</option>
        <option value="DIMINUE">Diminué</option>
      </select>
    </div>
  }

  <!-- Anticorps -->
  <div class="mb-3 d-flex flex-wrap gap-4">
    <div class="form-check">
      <input type="checkbox" class="form-check-input" formControlName="antiFAHNonNeutralisant" id="antiFAHNonNeutralisant" />
      <label class="form-check-label" for="antiFAHNonNeutralisant">Anti-FAH non neutralisant</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" formControlName="antiFAHNegatif" id="antiFAHNegatif" />
      <label class="form-check-label" for="antiFAHNegatif">Anti-FAH négatif</label>
    </div>
  </div>

  <!-- Recherche ACC -->
  <div class="mb-3">
    <label class="form-label">Recherche ACC type LA associé</label>
    <select class="form-control" formControlName="rechercheACC">
      <option [ngValue]="null" disabled selected hidden>Choisir</option>
      @for (acc of rechercheACCValues; track $index) {
        <option [value]="acc">
          {{ {
            NON_FAITE: 'Non faite',
            FAITE: 'Faite',
            POSITIVE: 'Positive',
            NEGATIVE: 'Négative',
            DOUTEUSE: 'Douteuse'
          }[acc] }}
        </option>
      }
    </select>
  </div>

  <!-- CAT thérapeutique -->
  <div class="mb-3">
    <label class="form-label">CAT thérapeutique</label>
    <div class="d-flex flex-wrap gap-4">
      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="augmenterDoseFacteur" id="augmenterDoseFacteur" />
        <label for="augmenterDoseFacteur" class="form-check-label">Augmenter dose facteur</label>
      </div>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="novoseven" id="novoseven" />
        <label for="novoseven" class="form-check-label">Novoseven</label>
      </div>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="feiba" id="feiba" />
        <label for="feiba" class="form-check-label">Feiba</label>
      </div>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="corticotherapie" id="corticotherapie" />
        <label for="corticotherapie" class="form-check-label">Corticothérapie</label>
      </div>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="immurel" id="immurel" />
        <label for="immurel" class="form-check-label">Immurel</label>
      </div>
    </div>
  </div>

  <!-- ITI -->
  <div class="mb-3">
    <label class="form-label">ITI</label>
    <input type="checkbox" class="form-check-input" formControlName="iti" id="iti" />
    <label for="iti" class="form-check-label ms-2">Oui</label>
  </div>

  @if (editForm.get('iti')?.value) {
    <div class="mb-3">
      <label class="form-label" for="field_posologieITI">Posologie</label>
      <input type="text" class="form-control" formControlName="posologieITI" />
    </div>

    <div class="mb-3">
      <label class="form-label" for="field_dureeITI">Durée</label>
      <input type="text" class="form-control" formControlName="dureeITI" />
    </div>

    <div class="mb-3">
      <label class="form-label" for="field_observanceITI">Observance</label>
      <select class="form-control" formControlName="observanceITI">
        <option [ngValue]="null" disabled selected hidden>Choisir</option>
        <option value="OUI">Oui</option>
        <option value="NON">Non</option>
        <option value="NP">NP</option>
      </select>
    </div>

    @if (editForm.get('observanceITI')?.value === 'NON') {
      <div class="mb-3">
        <label class="form-label" for="field_causeNonObservance">Cause non observance</label>
        <input type="text" class="form-control" formControlName="causeNonObservance" />
      </div>
    }
  }

  <!-- Évolution inhibiteur -->
  <div class="mb-3">
    <label class="form-label">Évolution de l’inhibiteur</label>
    <select class="form-control" formControlName="evolutionInhibiteur">
      <option [ngValue]="null" disabled selected hidden>Choisir</option>
      <option value="DISPARITION">Disparition</option>
      <option value="PERSISTANCE">Persistance</option>
    </select>
  </div>

  <!-- Prophylaxie Hemlibra -->
  <div class="mb-3">
    <label class="form-label">Prophylaxie par Hemlibra</label>
    <input type="checkbox" class="form-check-input" formControlName="prophylaxieHemlibra" id="prophylaxieHemlibra" />
    <label for="prophylaxieHemlibra" class="form-check-label ms-2">Oui</label>
  </div>

  @if (editForm.get('prophylaxieHemlibra')?.value) {
    <div class="mb-3">
      <label class="form-label">Date de début</label>
      <div class="input-group">
        <input
          type="text"
          class="form-control"
          formControlName="dateDebutHemlibra"
          ngbDatepicker
          #dateDebutHemlibraDp="ngbDatepicker"
        />
        <button type="button" class="btn btn-outline-secondary" (click)="dateDebutHemlibraDp.toggle()">
          <fa-icon icon="calendar-alt"></fa-icon>
        </button>
      </div>
    </div>
  }
              <div class="mb-3">
          <label class="form-label" for="field_schemaTherapeutique">Schema Therapeutique</label>
          <select
            class="form-control"
            name="schemaTherapeutique"
            formControlName="schemaTherapeutique"
            id="field_schemaTherapeutique"
            data-cy="schemaTherapeutique"
          >
            <option [ngValue]="null"></option>
            @for (schemaTherapeutique of schemaTherapeutiqueValues; track $index) {
              <option [value]="schemaTherapeutique">
                {{ { null: '', HEBDOMADAIRE: 'HEBDOMADAIRE', MENSUEL: 'MENSUEL', BIMENSUEL: 'BIMENSUEL' }[schemaTherapeutique] }}
              </option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_efficaciteHemlibra">Efficacite Hemlibra</label>
          <input
            type="number"
            class="form-control"
            name="efficaciteHemlibra"
            id="field_efficaciteHemlibra"
            data-cy="efficaciteHemlibra"
            formControlName="efficaciteHemlibra"
          />
        </div>
}




<!-- 3. COMPLICATIONS VIRALES -->
<div class="mb-3">
  <label class="form-label fw-bold">3 - Complications virales</label>
</div>

<!-- Sérologie HBC -->
<div class="mb-3">
  <label class="form-label" for="field_serologieHBC">Sérologie HBC</label>
  <select class="form-control" formControlName="serologieHBC" id="field_serologieHBC">
    <option [ngValue]="null" disabled selected hidden>Choisir</option>
    @for (serologie of serologieValues; track $index) {
      <option [value]="serologie">{{ { POSITIVE: 'Positive', NEGATIVE: 'Négative', NP: 'NP' }[serologie] }}</option>
    }
  </select>
</div>

<!-- Sérologie HVC -->
<div class="mb-3">
  <label class="form-label" for="field_serologieHVC">Sérologie HVC</label>
  <select class="form-control" formControlName="serologieHVC" id="field_serologieHVC">
    <option [ngValue]="null" disabled selected hidden>Choisir</option>
    @for (serologie of serologieValues; track $index) {
      <option [value]="serologie">{{ { POSITIVE: 'Positive', NEGATIVE: 'Négative', NP: 'NP' }[serologie] }}</option>
    }
  </select>
</div>

<!-- Si sérologie HVC positive -->
@if (editForm.get('serologieHVC')?.value === 'POSITIVE') {
  <div class="mb-3">
    <label class="form-label">Date de découverte VHC</label>
    <div class="input-group">
      <input
        type="text"
        class="form-control"
        formControlName="dateDecouverteVHC"
        ngbDatepicker
        #dateDecouverteVHCDp="ngbDatepicker"
      />
      <button type="button" class="btn btn-outline-secondary" (click)="dateDecouverteVHCDp.toggle()">
        <fa-icon icon="calendar-alt"></fa-icon>
      </button>
    </div>
  </div>

  @let chargeViraleVHCRef = editForm.get('chargeViraleVHC')!;
  <div class="mb-3">
    <label class="form-label" for="field_chargeViraleVHC">Charge virale</label>
    <input type="text" class="form-control" formControlName="chargeViraleVHC" />
    @if (chargeViraleVHCRef.invalid && (chargeViraleVHCRef.dirty || chargeViraleVHCRef.touched)) {
      <div>
        @if (chargeViraleVHCRef.errors?.maxlength) {
          <small class="text-danger">Maximum 25 caractères.</small>
        }
      </div>
    }
  </div>

  <!-- Traitement VHC -->
  <div class="mb-3">
    <label class="form-label">Traitement VHC</label>
    <select class="form-control" formControlName="traitementVHC">
      <option [ngValue]="null" disabled selected hidden>Choisir</option>
      @for (val of ouiNonNPValues; track $index) {
        <option [value]="val">{{ { OUI: 'Oui', NON: 'Non', NP: 'NP' }[val] }}</option>
      }
    </select>
  </div>

  <!-- Évolution VHC -->
  <div class="mb-3">
    <label class="form-label">Évolution VHC</label>
    <select class="form-control" formControlName="evolutionVHC">
      <option [ngValue]="null" disabled selected hidden>Choisir</option>
      <option value="DISPARITION">Disparition</option>
      <option value="PERSISTANCE">Persistance</option>
    </select>
  </div>
}

<!-- Sérologie HIV -->
<div class="mb-3">
  <label class="form-label" for="field_serologieHIV">Sérologie HIV</label>
  <select class="form-control" formControlName="serologieHIV" id="field_serologieHIV">
    <option [ngValue]="null" disabled selected hidden>Choisir</option>
    @for (serologie of serologieValues; track $index) {
      <option [value]="serologie">{{ { POSITIVE: 'Positive', NEGATIVE: 'Négative', NP: 'NP' }[serologie] }}</option>
    }
  </select>
</div>


    </div>
  </div>
</div>

<!-- Accordéon Section 8: EVOLUTION -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingEvolution">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseEvolution"
      aria-expanded="false"
      aria-controls="collapseEvolution"
    >
      Evolution
    </button>
  </h2>
  <div
    id="collapseEvolution"
    class="accordion-collapse collapse"
    aria-labelledby="headingEvolution"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section EVOLUTION -->



      
<!-- 1. Vie sociale -->
<div class="mb-3">
  <label class="form-label fw-bold">1 - Vie sociale</label>
  <select class="form-control" formControlName="vieSociale">
    <option [ngValue]="null" disabled selected hidden>Choisir</option>
    @for (vieSociale of vieSocialeValues; track $index) {
      <option [value]="vieSociale">
        {{ { PRESCOLAIRE: 'Préscolaire', SCOLARISE: 'Scolarisé', CHOMEUR: 'Chômeur', TRAVAILLE: 'Travaille' }[vieSociale] }}
      </option>
    }
  </select>
</div>

<!-- 2. Marié -->
<div class="mb-3">
  <label class="form-label">2 - Marié</label>
  <select class="form-control" formControlName="marie">
    <option [ngValue]="null" disabled selected hidden>Choisir</option>
    @for (val of ouiNonNPValues; track $index) {
      <option [value]="val">{{ { OUI: 'Oui', NON: 'Non', NP: 'NP' }[val] }}</option>
    }
  </select>
</div>

<!-- Enfants si marié oui -->
@if (editForm.get('marie')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label">Enfants</label>
    <select class="form-control" formControlName="enfants">
      <option [ngValue]="null" disabled selected hidden>Choisir</option>
      @for (val of ouiNonNPValues; track $index) {
        <option [value]="val">{{ { OUI: 'Oui', NON: 'Non', NP: 'NP' }[val] }}</option>
      }
    </select>
  </div>
}

<!-- 4. Handicap -->
<div class="mb-3">
  <label class="form-label">4 - Handicap</label>
  <select class="form-control" formControlName="handicap">
    <option [ngValue]="null" disabled selected hidden>Choisir</option>
    @for (val of ouiNonNPValues; track $index) {
      <option [value]="val">{{ { OUI: 'Oui', NON: 'Non', NP: 'NP' }[val] }}</option>
    }
  </select>
</div>

<!-- Type handicap si oui -->
@if (editForm.get('handicap')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label">Type de handicap</label>
    <input type="text" class="form-control" formControlName="typeHandicap" />
  </div>
}

<!-- 5. Activité sportive -->
<div class="mb-3">
  <label class="form-label">5 - Activité sportive</label>
  <input type="checkbox" class="form-check" formControlName="activiteSportive" />
</div>

@if (editForm.get('activiteSportive')?.value) {
  <div class="mb-3">
    <label class="form-label">Type d’activité sportive</label>
    <input type="text" class="form-control" formControlName="typeActiviteSportive" />
  </div>
}

<!-- 6. Décédé -->
<div class="mb-3">
  <label class="form-label">6 - Décédé</label>
  <input type="checkbox" class="form-check" formControlName="decede" />
</div>

@if (editForm.get('decede')?.value) {
  <div class="mb-3">
    <label class="form-label">Cause du décès</label>
    <input type="text" class="form-control" formControlName="causeDeces" />
  </div>

  <div class="mb-3">
    <label class="form-label">Date du décès</label>
    <div class="input-group">
      <input
        type="text"
        class="form-control"
        formControlName="dateDeces"
        ngbDatepicker
        #dateDecesDp="ngbDatepicker"
      />
      <button type="button" class="btn btn-outline-secondary" (click)="dateDecesDp.toggle()">
        <fa-icon icon="calendar-alt"></fa-icon>
      </button>
    </div>
  </div>
}

      
      </div>
    </div>
  </div>
</div>
        </div>
      <div>
        <button type="button" id="cancel-save" data-cy="entityCreateCancelButton" class="btn btn-secondary" (click)="previousState()">
          <fa-icon icon="ban"></fa-icon>&nbsp;<span>Annuler</span>
        </button>

        <button
          type="submit"
          id="save-entity"
          data-cy="entityCreateSaveButton"
          [disabled]="editForm.invalid || isSaving"
          class="btn btn-primary"
        >
          <fa-icon icon="save"></fa-icon>&nbsp;<span>Sauvegarder</span>
        </button>
      </div>
    </form>
  </div>
</div>
