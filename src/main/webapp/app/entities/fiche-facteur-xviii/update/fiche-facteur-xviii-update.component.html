<div class="d-flex justify-content-center">
  <div class="col-8">
    <form name="editForm" novalidate (ngSubmit)="save()" [formGroup]="editForm">
      <h2 id="jhi-fiche-facteur-xviii-heading" data-cy="FicheFacteurXVIIICreateUpdateHeading">Créer ou éditer une Fiche Facteur X, V, II, I</h2>

      <div>
        <jhi-alert-error></jhi-alert-error>

        @if (editForm.controls.id.value !== null) {
          <div class="mb-3">
            <label class="form-label" for="field_id">ID</label>
            <input type="number" class="form-control" name="id" id="field_id" data-cy="id" formControlName="id" [readonly]="true" />
          </div>
        }

       <div class="accordion" id="ficheAccordion">
          <!-- Accordéon Section 1: Identification -->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingIdentification">
              <button
                class="accordion-button"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseIdentification"
                aria-expanded="true"
                aria-controls="collapseIdentification"
              >
                Identification
              </button>
            </h2>
            <div
              id="collapseIdentification"
              class="accordion-collapse collapse show"
              aria-labelledby="headingIdentification"
              data-bs-parent="#ficheAccordion"
            >
              <div class="accordion-body">
                <!-- Champs pour la section Identification -->
                
        <div class="mb-3">
          <label class="form-label" for="field_dossierNumber">Numéro de dossier</label>
          <input
            type="text"
            class="form-control"
            name="dossierNumber"
            id="field_dossierNumber"
            data-cy="dossierNumber"
            formControlName="dossierNumber"
          />
        </div>

        @let ordreNumberRef = editForm.get('ordreNumber')!;
        <div class="mb-3">
          <label class="form-label" for="field_ordreNumber">Numéro d'ordre</label>
          <input
            type="text"
            class="form-control"
            name="ordreNumber"
            id="field_ordreNumber"
            data-cy="ordreNumber"
            formControlName="ordreNumber"
          />
          @if (ordreNumberRef.invalid && (ordreNumberRef.dirty || ordreNumberRef.touched)) {
            <div>
              @if (editForm.get('ordreNumber')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let indexNumberRef = editForm.get('indexNumber')!;
        <div class="mb-3">
          <label class="form-label" for="field_indexNumber">Numéro d'index</label>
          <input
            type="text"
            class="form-control"
            name="indexNumber"
            id="field_indexNumber"
            data-cy="indexNumber"
            formControlName="indexNumber"
          />
          @if (indexNumberRef.invalid && (indexNumberRef.dirty || indexNumberRef.touched)) {
            <div>
              @if (editForm.get('indexNumber')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let prenomRef = editForm.get('prenom')!;
        <div class="mb-3">
          <label class="form-label" for="field_prenom">Prénom</label>
          <input type="text" class="form-control" name="prenom" id="field_prenom" data-cy="prenom" formControlName="prenom" />
          @if (prenomRef.invalid && (prenomRef.dirty || prenomRef.touched)) {
            <div>
              @if (editForm.get('prenom')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let nomRef = editForm.get('nom')!;
        <div class="mb-3">
          <label class="form-label" for="field_nom">Nom</label>
          <input type="text" class="form-control" name="nom" id="field_nom" data-cy="nom" formControlName="nom" />
          @if (nomRef.invalid && (nomRef.dirty || nomRef.touched)) {
            <div>
              @if (editForm.get('nom')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let nomJeuneFilleRef = editForm.get('nomJeuneFille')!;
        <div class="mb-3">
          <label class="form-label" for="field_nomJeuneFille">Nom de Jeune Fille</label>
          <input
            type="text"
            class="form-control"
            name="nomJeuneFille"
            id="field_nomJeuneFille"
            data-cy="nomJeuneFille"
            formControlName="nomJeuneFille"
          />
          @if (nomJeuneFilleRef.invalid && (nomJeuneFilleRef.dirty || nomJeuneFilleRef.touched)) {
            <div>
              @if (editForm.get('nomJeuneFille')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let professionRef = editForm.get('profession')!;
        <div class="mb-3">
          <label class="form-label" for="field_profession">Profession</label>
          <input
            type="text"
            class="form-control"
            name="profession"
            id="field_profession"
            data-cy="profession"
            formControlName="profession"
          />
          @if (professionRef.invalid && (professionRef.dirty || professionRef.touched)) {
            <div>
              @if (editForm.get('profession')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let etatCivilRef = editForm.get('etatCivil')!;
        <div class="mb-3">
          <label class="form-label" for="field_etatCivil">Etat Civil</label>
          <select class="form-control" name="etatCivil" formControlName="etatCivil" id="field_etatCivil" data-cy="etatCivil">
            <option [ngValue]="null"></option>
            @for (civilStatus of civilStatusValues; track $index) {
              <option [value]="civilStatus">
                {{ { null: '', CELIBATAIRE: 'CELIBATAIRE', MARIE: 'MARIE', DIVORCE: 'DIVORCE', NP: 'NP' }[civilStatus] }}
              </option>
            }
          </select>
          @if (etatCivilRef.invalid && (etatCivilRef.dirty || etatCivilRef.touched)) {
            <div>
              @if (editForm.get('etatCivil')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let serviceCliniqueRef = editForm.get('serviceClinique')!;
        <div class="mb-3">
          <label class="form-label" for="field_serviceClinique">Service Clinique</label>
          <select
            class="form-control"
            name="serviceClinique"
            formControlName="serviceClinique"
            id="field_serviceClinique"
            data-cy="serviceClinique"
          >
            <option [ngValue]="null"></option>
            @for (serviceCliniqueType of serviceCliniqueTypeValues; track $index) {
              <option [value]="serviceCliniqueType">
                {{
                  {
                    null: '',
                    HTO: 'HTO',
                    PRIVE: 'PRIVE',
                    PEDIATRIE_A: 'PEDIATRIE_A',
                    PEDIATRIE_B: 'PEDIATRIE_B',
                    PUR: 'PUR',
                    GYNECO: 'GYNECO',
                    AUTRE: 'AUTRE',
                  }[serviceCliniqueType]
                }}
              </option>
            }
          </select>
          @if (serviceCliniqueRef.invalid && (serviceCliniqueRef.dirty || serviceCliniqueRef.touched)) {
            <div>
              @if (editForm.get('serviceClinique')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let autreServiceCliniqueRef = editForm.get('autreServiceClinique')!;
        <div class="mb-3">
          <label class="form-label" for="field_autreServiceClinique">Autre Service Clinique</label>
          <input
            type="text"
            class="form-control"
            name="autreServiceClinique"
            id="field_autreServiceClinique"
            data-cy="autreServiceClinique"
            formControlName="autreServiceClinique"
          />
          @if (autreServiceCliniqueRef.invalid && (autreServiceCliniqueRef.dirty || autreServiceCliniqueRef.touched)) {
            <div>
              @if (editForm.get('autreServiceClinique')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 255 caractères.</small>
              }
            </div>
          }
        </div>

        @let couvertureSocialeRef = editForm.get('couvertureSociale')!;
        <div class="mb-3">
          <label class="form-label" for="field_couvertureSociale">Couverture Sociale</label>
          <select
            class="form-control"
            name="couvertureSociale"
            formControlName="couvertureSociale"
            id="field_couvertureSociale"
            data-cy="couvertureSociale"
          >
            <option [ngValue]="null"></option>
            @for (couvertureSociale of couvertureSocialeValues; track $index) {
              <option [value]="couvertureSociale">
                {{ { null: '', CNAM: 'CNAM', INDIGENT: 'INDIGENT', NP: 'NP' }[couvertureSociale] }}
              </option>
            }
          </select>
          @if (couvertureSocialeRef.invalid && (couvertureSocialeRef.dirty || couvertureSocialeRef.touched)) {
            <div>
              @if (editForm.get('couvertureSociale')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let sexeRef = editForm.get('sexe')!;
        <div class="mb-3">
          <label class="form-label" for="field_sexe">Sexe</label>
          <select class="form-control" name="sexe" formControlName="sexe" id="field_sexe" data-cy="sexe">
            <option [ngValue]="null"></option>
            @for (gender of genderValues; track $index) {
              <option [value]="gender">{{ { null: '', MASCULIN: 'MASCULIN', FEMININ: 'FEMININ' }[gender] }}</option>
            }
          </select>
          @if (sexeRef.invalid && (sexeRef.dirty || sexeRef.touched)) {
            <div>
              @if (editForm.get('sexe')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_dateNaissance">Date de Naissance</label>
          <div class="input-group">
            <input
              id="field_dateNaissance"
              data-cy="dateNaissance"
              type="text"
              class="form-control"
              name="dateNaissance"
              ngbDatepicker
              #dateNaissanceDp="ngbDatepicker"
              formControlName="dateNaissance"
            />
            <button type="button" class="btn btn-secondary" (click)="dateNaissanceDp.toggle()">
              <fa-icon icon="calendar-alt"></fa-icon>
            </button>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_ageActuel">Age Actuel</label>
          <input type="number" class="form-control" name="ageActuel" id="field_ageActuel" data-cy="ageActuel" formControlName="ageActuel" readonly/>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_origine">Origine</label>
          <select class="form-control" name="origine" formControlName="origine" id="field_origine" data-cy="origine">
            <option [ngValue]="null"></option>
            @for (region of regionValues; track $index) {
              <option [value]="region">
                {{
                  {
                    null: '',
                    SFAX: 'SFAX',
                    GABES: 'GABES',
                    GAFSA: 'GAFSA',
                    KEBILI: 'KEBILI',
                    TOZEUR: 'TOZEUR',
                    MEDNINE: 'MEDNINE',
                    TATAOUINE: 'TATAOUINE',
                    SBZ: 'SBZ',
                    KASSERINE: 'KASSERINE',
                    MAHDIA: 'MAHDIA',
                    KAIRAOUANE: 'KAIRAOUANE',
                    MONASTIR: 'MONASTIR',
                    SOUSSE: 'SOUSSE',
                    AUTRE: 'AUTRE',
                  }[region]
                }}
              </option>
            }
          </select>
        </div>

        @let autreOrigineRef = editForm.get('autreOrigine')!;
        <div class="mb-3">
          <label class="form-label" for="field_autreOrigine">Autre Origine</label>
          <input
            type="text"
            class="form-control"
            name="autreOrigine"
            id="field_autreOrigine"
            data-cy="autreOrigine"
            formControlName="autreOrigine"
          />
          @if (autreOrigineRef.invalid && (autreOrigineRef.dirty || autreOrigineRef.touched)) {
            <div>
              @if (editForm.get('autreOrigine')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let adresseRef = editForm.get('adresse')!;
        <div class="mb-3">
          <label class="form-label" for="field_adresse">Adresse</label>
          <input type="text" class="form-control" name="adresse" id="field_adresse" data-cy="adresse" formControlName="adresse" />
          @if (adresseRef.invalid && (adresseRef.dirty || adresseRef.touched)) {
            <div>
              @if (editForm.get('adresse')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let telephoneRef = editForm.get('telephone')!;
        <div class="mb-3">
          <label class="form-label" for="field_telephone">Téléphone</label>
          <input type="text" class="form-control" name="telephone" id="field_telephone" data-cy="telephone" formControlName="telephone" />
          @if (telephoneRef.invalid && (telephoneRef.dirty || telephoneRef.touched)) {
            <div>
              @if (editForm.get('telephone')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 20 caractères.</small>
              }
            </div>
          }
        </div>

        @let prenomPereRef = editForm.get('prenomPere')!;
        <div class="mb-3">
          <label class="form-label" for="field_prenomPere">Prénom Père</label>
          <input
            type="text"
            class="form-control"
            name="prenomPere"
            id="field_prenomPere"
            data-cy="prenomPere"
            formControlName="prenomPere"
          />
          @if (prenomPereRef.invalid && (prenomPereRef.dirty || prenomPereRef.touched)) {
            <div>
              @if (editForm.get('prenomPere')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let professionPereRef = editForm.get('professionPere')!;
        <div class="mb-3">
          <label class="form-label" for="field_professionPere">Profession Père</label>
          <input
            type="text"
            class="form-control"
            name="professionPere"
            id="field_professionPere"
            data-cy="professionPere"
            formControlName="professionPere"
          />
          @if (professionPereRef.invalid && (professionPereRef.dirty || professionPereRef.touched)) {
            <div>
              @if (editForm.get('professionPere')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let nomPrenomMereRef = editForm.get('nomPrenomMere')!;
        <div class="mb-3">
          <label class="form-label" for="field_nomPrenomMere">Nom Prénom Mère</label>
          <input
            type="text"
            class="form-control"
            name="nomPrenomMere"
            id="field_nomPrenomMere"
            data-cy="nomPrenomMere"
            formControlName="nomPrenomMere"
          />
          @if (nomPrenomMereRef.invalid && (nomPrenomMereRef.dirty || nomPrenomMereRef.touched)) {
            <div>
              @if (editForm.get('nomPrenomMere')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let professionMereRef = editForm.get('professionMere')!;
        <div class="mb-3">
          <label class="form-label" for="field_professionMere">Profession Mère</label>
          <input
            type="text"
            class="form-control"
            name="professionMere"
            id="field_professionMere"
            data-cy="professionMere"
            formControlName="professionMere"
          />
          @if (professionMereRef.invalid && (professionMereRef.dirty || professionMereRef.touched)) {
            <div>
              @if (editForm.get('professionMere')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let medecinTraitantRef = editForm.get('medecinTraitant')!;
        <div class="mb-3">
          <label class="form-label" for="field_medecinTraitant">Médecin Traitant</label>
          <input
            type="text"
            class="form-control"
            name="medecinTraitant"
            id="field_medecinTraitant"
            data-cy="medecinTraitant"
            formControlName="medecinTraitant"
          />
          @if (medecinTraitantRef.invalid && (medecinTraitantRef.dirty || medecinTraitantRef.touched)) {
            <div>
              @if (editForm.get('medecinTraitant')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let serviceOrigineRef = editForm.get('serviceOrigine')!;
        <div class="mb-3">
          <label class="form-label" for="field_serviceOrigine">Service Origine</label>
          <input
            type="text"
            class="form-control"
            name="serviceOrigine"
            id="field_serviceOrigine"
            data-cy="serviceOrigine"
            formControlName="serviceOrigine"
          />
          @if (serviceOrigineRef.invalid && (serviceOrigineRef.dirty || serviceOrigineRef.touched)) {
            <div>
              @if (editForm.get('serviceOrigine')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let biologisteResponsableDgRef = editForm.get('biologisteResponsableDg')!;
        <div class="mb-3">
          <label class="form-label" for="field_biologisteResponsableDg">Biologiste Responsable Dg</label>
          <input
            type="text"
            class="form-control"
            name="biologisteResponsableDg"
            id="field_biologisteResponsableDg"
            data-cy="biologisteResponsableDg"
            formControlName="biologisteResponsableDg"
          />
          @if (biologisteResponsableDgRef.invalid && (biologisteResponsableDgRef.dirty || biologisteResponsableDgRef.touched)) {
            <div>
              @if (editForm.get('biologisteResponsableDg')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        @let diagnosticRef = editForm.get('diagnostic')!;
        <div class="mb-3">
          <label class="form-label" for="field_diagnostic">Diagnostic</label>
          <select class="form-control" name="diagnostic" formControlName="diagnostic" id="field_diagnostic" data-cy="diagnostic">
            <option [ngValue]="null"></option>
            @for (diagnosticType of diagnosticTypeValues; track $index) {
              <option [value]="diagnosticType">
                {{
                  {
                    null: '',
                    HEMOPHILIE: 'HEMOPHILIE',
                    WILLEBRAND: 'WILLEBRAND',
                    THROMBOPATHIE: 'THROMBOPATHIE',
                    DEFICIT_FACTEUR_VII: 'DEFICIT_FACTEUR_VII',
                    DEFICIT_FACTEUR_XI: 'DEFICIT_FACTEUR_XI',
                    DEFICIT_FACTEUR_XIII: 'DEFICIT_FACTEUR_XIII',
                    DEFICIT_COMBINE: 'DEFICIT_COMBINE',
                    AUTRE: 'AUTRE',
                  }[diagnosticType]
                }}
              </option>
            }
          </select>
          @if (diagnosticRef.invalid && (diagnosticRef.dirty || diagnosticRef.touched)) {
            <div>
              @if (editForm.get('diagnostic')?.errors?.required) {
                <small class="form-text text-danger">Ce champ est obligatoire.</small>
              }
            </div>
          }
        </div>

        @let autreDiagnosticRef = editForm.get('autreDiagnostic')!;
        <div class="mb-3">
          <label class="form-label" for="field_autreDiagnostic">Autre Diagnostic</label>
          <input
            type="text"
            class="form-control"
            name="autreDiagnostic"
            id="field_autreDiagnostic"
            data-cy="autreDiagnostic"
            formControlName="autreDiagnostic"
          />
          @if (autreDiagnosticRef.invalid && (autreDiagnosticRef.dirty || autreDiagnosticRef.touched)) {
            <div>
              @if (editForm.get('autreDiagnostic')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
              }
            </div>
          }
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_anneeDiagnostic">Année Diagnostic</label>
          <input
            type="number"
            class="form-control"
            name="anneeDiagnostic"
            id="field_anneeDiagnostic"
            data-cy="anneeDiagnostic"
            formControlName="anneeDiagnostic"
          />
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_dateEnregistrementRegistre">Date Enregistrement Registre</label>
          <div class="input-group">
            <input
              id="field_dateEnregistrementRegistre"
              data-cy="dateEnregistrementRegistre"
              type="text"
              class="form-control"
              name="dateEnregistrementRegistre"
              ngbDatepicker
              #dateEnregistrementRegistreDp="ngbDatepicker"
              formControlName="dateEnregistrementRegistre"
            />
            <button type="button" class="btn btn-secondary" (click)="dateEnregistrementRegistreDp.toggle()">
              <fa-icon icon="calendar-alt"></fa-icon>
            </button>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_consentementRegistre">Consentement Registre</label>
          <select
            class="form-control"
            name="consentementRegistre"
            formControlName="consentementRegistre"
            id="field_consentementRegistre"
            data-cy="consentementRegistre"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

                
              </div>
            </div>
          </div>


<!-- Accordéon Section 2: Antécédents -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingAntecedents">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseAntecedents"
      aria-expanded="false"
      aria-controls="collapseAntecedents"
    >
      Antécédents
    </button>
  </h2>
  <div
    id="collapseAntecedents"
    class="accordion-collapse collapse"
    aria-labelledby="headingAntecedents"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Antécédents -->

        <div class="mb-3">
          <label class="form-label" for="field_parentsConsanguins">Parents Consanguins</label>
          <select
            class="form-control"
            name="parentsConsanguins"
            formControlName="parentsConsanguins"
            id="field_parentsConsanguins"
            data-cy="parentsConsanguins"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_degreParenteConsanguins">Degre Parente Consanguins</label>
          <select
            class="form-control"
            name="degreParenteConsanguins"
            formControlName="degreParenteConsanguins"
            id="field_degreParenteConsanguins"
            data-cy="degreParenteConsanguins"
          >
            <option [ngValue]="null"></option>
            @for (degreParente of degreParenteValues; track $index) {
              <option [value]="degreParente">
                {{
                  { null: '', TROISIEME_DEGRE: 'TROISIEME_DEGRE', QUATRIEME_DEGRE: 'QUATRIEME_DEGRE', LOINTAIN: 'LOINTAIN' }[degreParente]
                }}
              </option>
            }
          </select>
        </div>

<!-- Cas Similaires -->
<div class="mb-3">
  <label class="form-label" for="field_casSimilaires">Cas Similaires</label>
  <select
    class="form-control"
    name="casSimilaires"
    formControlName="casSimilaires"
    id="field_casSimilaires"
    data-cy="casSimilaires"
  >
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">
        {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
      </option>
    }
  </select>
</div>

<!-- Affichage conditionnel si OUI -->
@let casSimilairesValue = editForm.get('casSimilaires')?.value;
@if (casSimilairesValue === 'OUI') {

  <div class="mb-3">
    <label class="form-label" for="field_nombreCas">Nombre Cas</label>
    <input
      type="number"
      min="1"
      max="3"
      class="form-control"
      name="nombreCas"
      id="field_nombreCas"
      data-cy="nombreCas"
      formControlName="nombreCas"
    />
  </div>

  @let nombreCasValue = editForm.get('nombreCas')?.value;
  @for (i of [1, 2, 3]; track i) {
    @if (nombreCasValue != null && nombreCasValue >= i) {

      <!-- Cas {{i}} Numero -->
      <div class="mb-3">
        <label class="form-label" for="field_cas{{i}}Numero">Cas {{i}} Numero</label>
        <input
          type="number"
          class="form-control"
          name="cas{{i}}Numero"
          id="field_cas{{i}}Numero"
          [attr.data-cy]="'cas' + i + 'Numero'"
          formControlName="cas{{i}}Numero"
        />
      </div>

      <!-- Lien Parenté -->
      <div class="mb-3">
        <label class="form-label" for="field_lienParenteCas{{i}}">Lien Parente Cas {{i}}</label>
        <select
          class="form-control"
          name="lienParenteCas{{i}}"
          formControlName="lienParenteCas{{i}}"
          id="field_lienParenteCas{{i}}"
          [attr.data-cy]="'lienParenteCas' + i"
        >
          <option [ngValue]="null"></option>
          @for (lienParente of lienParenteValues; track $index) {
            <option [value]="lienParente">
              {{ { null: '', FRERE: 'FRERE', COUSIN: 'COUSIN', LOINTAIN: 'LOINTAIN' }[lienParente] }}
            </option>
          }
        </select>
      </div>

      <!-- Degré Parenté -->
      @let degreParenteRef = editForm.get('degreParenteCas' + i)!;
      <div class="mb-3">
        <label class="form-label" for="field_degreParenteCas{{i}}">Degré Parenté Cas {{i}}</label>
        <input
          type="text"
          class="form-control"
          name="degreParenteCas{{i}}"
          id="field_degreParenteCas{{i}}"
          [attr.data-cy]="'degreParenteCas' + i"
          formControlName="degreParenteCas{{i}}"
        />
        @if (degreParenteRef.invalid && (degreParenteRef.dirty || degreParenteRef.touched)) {
          <div>
            @if (degreParenteRef.errors?.maxlength) {
              <small class="form-text text-danger">Ce champ doit faire moins de 25 caractères.</small>
            }
          </div>
        }
      </div>

      <!-- Type Hémorragie -->
      @let typeHemorragieRef = editForm.get('typeHemorragieCas' + i)!;
      <div class="mb-3">
        <label class="form-label" for="field_typeHemorragieCas{{i}}">Type Hémorragie Cas {{i}}</label>
        <input
          type="text"
          class="form-control"
          name="typeHemorragieCas{{i}}"
          id="field_typeHemorragieCas{{i}}"
          [attr.data-cy]="'typeHemorragieCas' + i"
          formControlName="typeHemorragieCas{{i}}"
        />
        @if (typeHemorragieRef.invalid && (typeHemorragieRef.dirty || typeHemorragieRef.touched)) {
          <div>
            @if (typeHemorragieRef.errors?.maxlength) {
              <small class="form-text text-danger">Ce champ doit faire moins de 255 caractères.</small>
            }
          </div>
        }
      </div>

    }
  }
}



<!-- Décès Syndrome Hémorragique -->
<div class="mb-3">
  <label class="form-label" for="field_decesSyndromeHemorragique">Décès Syndrome Hémorragique</label>
  <select
    class="form-control"
    name="decesSyndromeHemorragique"
    formControlName="decesSyndromeHemorragique"
    id="field_decesSyndromeHemorragique"
    data-cy="decesSyndromeHemorragique"
  >
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Bloc conditionnel -->
@let decesSyndromeValue = editForm.get('decesSyndromeHemorragique')?.value;
@if (decesSyndromeValue === 'OUI') {

  <!-- Nombre de décès -->
  <div class="mb-3">
    <label class="form-label" for="field_nombreDeces">Nombre Décès</label>
    <input
      type="number"
      min="1"
      max="3"
      class="form-control"
      name="nombreDeces"
      id="field_nombreDeces"
      data-cy="nombreDeces"
      formControlName="nombreDeces"
    />
  </div>

  <!-- Boucle sur les cas de décès -->
  @let nombreDecesValue = editForm.get('nombreDeces')?.value;
  @for (i of [1, 2, 3]; track i) {
    @if (nombreDecesValue != null && nombreDecesValue >= i) {

      <div class="mb-3">
        <label class="form-label" for="field_deces{{i}}Numero">Décès {{i}} Numéro</label>
        <input
          type="number"
          class="form-control"
          name="deces{{i}}Numero"
          id="field_deces{{i}}Numero"
          [attr.data-cy]="'deces' + i + 'Numero'"
          formControlName="deces{{i}}Numero"
        />
      </div>

      <div class="mb-3">
        <label class="form-label" for="field_lienParenteDeces{{i}}">Lien Parenté Décès {{i}}</label>
        <select
          class="form-control"
          name="lienParenteDeces{{i}}"
          formControlName="lienParenteDeces{{i}}"
          id="field_lienParenteDeces{{i}}"
          [attr.data-cy]="'lienParenteDeces' + i"
        >
          <option [ngValue]="null"></option>
          @for (lienParente of lienParenteValues; track $index) {
            <option [value]="lienParente">
              {{ { null: '', FRERE: 'FRERE', COUSIN: 'COUSIN', LOINTAIN: 'LOINTAIN' }[lienParente] }}
            </option>
          }
        </select>
      </div>

      @let causeDecesRef = editForm.get('causeDeces' + i)!;
      <div class="mb-3">
        <label class="form-label" for="field_causeDeces{{i}}">Cause Décès {{i}}</label>
        <input
          type="text"
          class="form-control"
          name="causeDeces{{i}}"
          id="field_causeDeces{{i}}"
          [attr.data-cy]="'causeDeces' + i"
          formControlName="causeDeces{{i}}"
        />
        @if (causeDecesRef.invalid && (causeDecesRef.dirty || causeDecesRef.touched)) {
          <div>
            @if (causeDecesRef.errors?.maxlength) {
              <small class="form-text text-danger">Ce champ doit faire moins de 255 caractères.</small>
            }
          </div>
        }
      </div>

    }
  }
}

<div class="mb-3 d-flex align-items-center">
  <input
    type="checkbox"
    class="form-check"
    name="enqueteFamiliale"
    id="field_enqueteFamiliale"
    data-cy="enqueteFamiliale"
    formControlName="enqueteFamiliale"
  />
  <label class="form-label ms-2 mb-0" for="field_enqueteFamiliale">
    Enquête Familiale
  </label>
</div>


          </div>
  </div>
</div>


          <!-- Accordéon Section 3: Circonstances de découverte -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingCirconstances">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseCirconstances"
      aria-expanded="false"
      aria-controls="collapseCirconstances"
    >
      Circonstances de découverte
    </button>
  </h2>
  <div
    id="collapseCirconstances"
    class="accordion-collapse collapse"
    aria-labelledby="headingCirconstances"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Circonstances de découverte -->

<!-- Syndrome Hémorragique -->
<div class="mb-3">
  <label class="form-label" for="field_syndromeHemorragique">Syndrome Hémorragique</label>
  <select
    class="form-control"
    name="syndromeHemorragique"
    formControlName="syndromeHemorragique"
    id="field_syndromeHemorragique"
    data-cy="syndromeHemorragique"
  >
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Affichage conditionnel de la précision -->
@if (editForm.get('syndromeHemorragique')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label" for="field_precisionSyndromeHemorragique">Précision Syndrome Hémorragique</label>
    <input
      type="text"
      class="form-control"
      name="precisionSyndromeHemorragique"
      id="field_precisionSyndromeHemorragique"
      data-cy="precisionSyndromeHemorragique"
      formControlName="precisionSyndromeHemorragique"
    />
  </div>
}


<!-- Découverte Fortuite -->
<div class="mb-3">
  <label class="form-label" for="field_decouverteFortuite">Découverte Fortuite</label>
  <select
    class="form-control"
    name="decouverteFortuite"
    formControlName="decouverteFortuite"
    id="field_decouverteFortuite"
    data-cy="decouverteFortuite"
  >
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Affichage conditionnel de la précision -->
@if (editForm.get('decouverteFortuite')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label" for="field_precisionDecouverteFortuite">Précision Découverte Fortuite</label>
    <input
      type="text"
      class="form-control"
      name="precisionDecouverteFortuite"
      id="field_precisionDecouverteFortuite"
      data-cy="precisionDecouverteFortuite"
      formControlName="precisionDecouverteFortuite"
    />
  </div>
}


        <div class="mb-3">
          <label class="form-label" for="field_jamaisSaigne">Le patient n’a jamais saigné :</label>
          <select class="form-control" name="jamaisSaigne" formControlName="jamaisSaigne" id="field_jamaisSaigne" data-cy="jamaisSaigne">
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

<div class="mb-3 d-flex align-items-center flex-wrap gap-3">
  <!-- Jours -->
  <div class="d-flex flex-column">
    <label class="form-label" for="field_agePremierSigneCliniqueJours">Age premier signe clinique : Jours</label>
    <input
      type="number"
      class="form-control"
      name="agePremierSigneCliniqueJours"
      id="field_agePremierSigneCliniqueJours"
      data-cy="agePremierSigneCliniqueJours"
      formControlName="agePremierSigneCliniqueJours"
    />
  </div>

  <!-- Mois -->
  <div class="d-flex flex-column">
    <label class="form-label" for="field_agePremierSigneCliniqueMois">Mois</label>
    <input
      type="number"
      class="form-control"
      name="agePremierSigneCliniqueMois"
      id="field_agePremierSigneCliniqueMois"
      data-cy="agePremierSigneCliniqueMois"
      formControlName="agePremierSigneCliniqueMois"
    />
  </div>

  <!-- Années -->
  <div class="d-flex flex-column">
    <label class="form-label" for="field_agePremierSigneCliniqueAnnees">Années</label>
    <input
      type="number"
      class="form-control"
      name="agePremierSigneCliniqueAnnees"
      id="field_agePremierSigneCliniqueAnnees"
      data-cy="agePremierSigneCliniqueAnnees"
      formControlName="agePremierSigneCliniqueAnnees"
    />
  </div>
</div>

<!-- Titre -->
<label class="form-label fw-bold d-block mb-2">Symptômes</label>

<!-- Grille de 3 colonnes -->
<div class="d-flex flex-wrap gap-3 mb-3">

  <!-- Ecchymose -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeEcchymose" formControlName="symptomeEcchymose" />
    <label class="form-check-label mb-0" for="field_symptomeEcchymose">Ecchymose</label>
  </div>

  <!-- Epistaxis -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeEpistaxis" formControlName="symptomeEpistaxis" />
    <label class="form-check-label mb-0" for="field_symptomeEpistaxis">Epistaxis</label>
  </div>

  <!-- Gingivorragies -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeGingivorragies" formControlName="symptomeGingivorragies" />
    <label class="form-check-label mb-0" for="field_symptomeGingivorragies">Gingivorragies</label>
  </div>

  <!-- Metrorragies -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeMetrorragies" formControlName="symptomeMetrorragies" />
    <label class="form-check-label mb-0" for="field_symptomeMetrorragies">Metrorragies</label>
  </div>

  <!-- Melena -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeMelena" formControlName="symptomeMelena" />
    <label class="form-check-label mb-0" for="field_symptomeMelena">Melena</label>
  </div>

  <!-- Hemoptysie -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeHemoptysie" formControlName="symptomeHemoptysie" />
    <label class="form-check-label mb-0" for="field_symptomeHemoptysie">Hemoptysie</label>
  </div>

  <!-- Post Amygdalectomie -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeHemorragiePostAmygdalectomie" formControlName="symptomeHemorragiePostAmygdalectomie" />
    <label class="form-check-label mb-0" for="field_symptomeHemorragiePostAmygdalectomie">Hémorragie post-amygdalectomie</label>
  </div>

  <!-- Post Avulsion Dentaire -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeHemorragiePostAvulsionDentaire" formControlName="symptomeHemorragiePostAvulsionDentaire" />
    <label class="form-check-label mb-0" for="field_symptomeHemorragiePostAvulsionDentaire">Hémorragie post-avulsion dentaire</label>
  </div>

  <!-- Chute Cordon -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeHemorragieChuteCordon" formControlName="symptomeHemorragieChuteCordon" />
    <label class="form-check-label mb-0" for="field_symptomeHemorragieChuteCordon">Hémorragie chute cordon</label>
  </div>

  <!-- Autre -->
  <div class="form-check d-flex align-items-center w-30">
    <input type="checkbox" class="form-check me-2" id="field_symptomeAutre" formControlName="symptomeAutre" />
    <label class="form-check-label mb-0" for="field_symptomeAutre">Autre</label>
  </div>
</div>

<!-- Description "Autre" conditionnelle -->
@let autreChecked = editForm.get('symptomeAutre')?.value;
@if (autreChecked) {
  <div class="mb-3">
    <label class="form-label" for="field_symptomeAutreDescription">Préciser</label>
    <input
      type="text"
      class="form-control"
      name="symptomeAutreDescription"
      id="field_symptomeAutreDescription"
      data-cy="symptomeAutreDescription"
      formControlName="symptomeAutreDescription"
    />
  </div>
}


      

        <div class="mb-3">
          <label class="form-label" for="field_datePremiereConsultation">Date Premiere Consultation</label>
          <div class="input-group">
            <input
              id="field_datePremiereConsultation"
              data-cy="datePremiereConsultation"
              type="text"
              class="form-control"
              name="datePremiereConsultation"
              ngbDatepicker
              #datePremiereConsultationDp="ngbDatepicker"
              formControlName="datePremiereConsultation"
            />
            <button type="button" class="btn btn-secondary" (click)="datePremiereConsultationDp.toggle()">
              <fa-icon icon="calendar-alt"></fa-icon>
            </button>
          </div>
        </div>

<!-- Label principal -->
<div class="mb-2">
  <label class="form-label fw-bold">Âge première consultation</label>
</div>

<!-- Les 3 champs sur la même ligne -->
<div class="mb-3 d-flex flex-wrap gap-3 align-items-end">
  <div class="flex-grow-1">
    <label class="form-label" for="field_agePremiereConsultationJours">Jours</label>
    <input
      type="number"
      class="form-control"
      name="agePremiereConsultationJours"
      id="field_agePremiereConsultationJours"
      data-cy="agePremiereConsultationJours"
      formControlName="agePremiereConsultationJours"
    />
  </div>

  <div class="flex-grow-1">
    <label class="form-label" for="field_agePremiereConsultationMois">Mois</label>
    <input
      type="number"
      class="form-control"
      name="agePremiereConsultationMois"
      id="field_agePremiereConsultationMois"
      data-cy="agePremiereConsultationMois"
      formControlName="agePremiereConsultationMois"
    />
  </div>

  <div class="flex-grow-1">
    <label class="form-label" for="field_agePremiereConsultationAnnees">Années</label>
    <input
      type="number"
      class="form-control"
      name="agePremiereConsultationAnnees"
      id="field_agePremiereConsultationAnnees"
      data-cy="agePremiereConsultationAnnees"
      formControlName="agePremiereConsultationAnnees"
    />
  </div>
</div>


<!-- Label principal -->
<div class="mb-2">
  <label class="form-label fw-bold">Âge diagnostic</label>
</div>

<!-- Les 3 champs sur une seule ligne -->
<div class="mb-3 d-flex flex-wrap gap-3 align-items-end">
  <div class="flex-grow-1">
    <label class="form-label" for="field_ageDiagnosticJours">Jours</label>
    <input
      type="number"
      class="form-control"
      name="ageDiagnosticJours"
      id="field_ageDiagnosticJours"
      data-cy="ageDiagnosticJours"
      formControlName="ageDiagnosticJours"
    />
  </div>

  <div class="flex-grow-1">
    <label class="form-label" for="field_ageDiagnosticMois">Mois</label>
    <input
      type="number"
      class="form-control"
      name="ageDiagnosticMois"
      id="field_ageDiagnosticMois"
      data-cy="ageDiagnosticMois"
      formControlName="ageDiagnosticMois"
    />
  </div>

  <div class="flex-grow-1">
    <label class="form-label" for="field_ageDiagnosticAnnees">Années</label>
    <input
      type="number"
      class="form-control"
      name="ageDiagnosticAnnees"
      id="field_ageDiagnosticAnnees"
      data-cy="ageDiagnosticAnnees"
      formControlName="ageDiagnosticAnnees"
    />
  </div>
</div>



    </div>
  </div>
</div>

<!-- Accordéon Section 4: Biologie au moment du diagnostic -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingBiologie">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseBiologie"
      aria-expanded="false"
      aria-controls="collapseBiologie"
    >
      Biologie au moment du diagnostic
    </button>
  </h2>
  <div
    id="collapseBiologie"
    class="accordion-collapse collapse"
    aria-labelledby="headingBiologie"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Biologie -->
      

      
<div class="mb-2">
  <label class="fw-bold d-block">Hémogramme :</label>
</div>


<div class="mb-3">
  <div class="row">
    <div class="col">
      <label class="form-label" for="field_hb">Hb (g/dl)</label>
      <input
        type="number"
        class="form-control"
        name="hb"
        id="field_hb"
        data-cy="hb"
        formControlName="hb"
      />
    </div>
    <div class="col">
      <label class="form-label" for="field_ht">Ht  (%)</label>
      <input
        type="number"
        class="form-control"
        name="ht"
        id="field_ht"
        data-cy="ht"
        formControlName="ht"
      />
    </div>
    <div class="col">
      <label class="form-label" for="field_plaquettes">Plaquettes (/mm3) </label>
      <input
        type="number"
        class="form-control"
        name="plaquettes"
        id="field_plaquettes"
        data-cy="plaquettes"
        formControlName="plaquettes"
      />
    </div>
  </div>
</div>

            <div class="mb-2">
  <label class="fw-bold d-block">Bilan d’hémostase :</label>
</div>

<div class="mb-3">
  <label class="form-label fw-bold">TO (PFA 200) :</label>
  <div class="d-flex flex-wrap gap-3">
    <div class="flex-grow-1">
      <label class="form-label" for="field_pfaColEpi">Col / Epi(s)</label>
      <input
        type="number"
        class="form-control"
        name="pfaColEpi"
        id="field_pfaColEpi"
        data-cy="pfaColEpi"
        formControlName="pfaColEpi"
      />
    </div>

    <div class="flex-grow-1">
      <label class="form-label" for="field_pfaColADP">Col / ADP(s)</label>
      <input
        type="number"
        class="form-control"
        name="pfaColADP"
        id="field_pfaColADP"
        data-cy="pfaColADP"
        formControlName="pfaColADP"
      />
    </div>
  </div>
</div>


<div class="mb-3">
  <div class="d-flex flex-wrap gap-3">
    <div class="flex-grow-1">
      <label class="form-label" for="field_tp">Tp (%)</label>
      <input
        type="number"
        class="form-control"
        name="tp"
        id="field_tp"
        data-cy="tp"
        formControlName="tp"
      />
    </div>

    <div class="flex-grow-1">
      <label class="form-label" for="field_tpMPlusT">Tp (M + T) (%)</label>
      <input
        type="number"
        class="form-control"
        name="tpMPlusT"
        id="field_tpMPlusT"
        data-cy="tpMPlusT"
        formControlName="tpMPlusT"
      />
    </div>

    <div class="flex-grow-1">
      <label class="form-label" for="field_fibrinogene">Fibrinogène (g/l)</label>
      <input
        type="number"
        class="form-control"
        name="fibrinogene"
        id="field_fibrinogene"
        data-cy="fibrinogene"
        formControlName="fibrinogene"
      />
    </div>
  </div>
</div>


<div class="mb-3">
  <div class="d-flex flex-wrap gap-3">
    <div class="flex-grow-1">
      <label class="form-label" for="field_tcaMT">TCA (M/T) (s)</label>
      <input
        type="number"
        class="form-control"
        name="tcaMT"
        id="field_tcaMT"
        data-cy="tcaMT"
        formControlName="tcaMT"
      />
    </div>

    <div class="flex-grow-1">
      <label class="form-label" for="field_tcaMPlusT">TCA (M+T) (s)</label>
      <input
        type="number"
        class="form-control"
        name="tcaMPlusT"
        id="field_tcaMPlusT"
        data-cy="tcaMPlusT"
        formControlName="tcaMPlusT"
      />
    </div>

    <div class="flex-grow-1">
      <label class="form-label" for="field_tcaTemoin">TCA (Témoin) (s)</label>
      <input
        type="number"
        class="form-control"
        name="tcaTemoin"
        id="field_tcaTemoin"
        data-cy="tcaTemoin"
        formControlName="tcaTemoin"
      />
    </div>
  </div>
</div>

<!-- Facteur déficitaire autre que le fibrinogène -->
<div class="mb-3">
  <label class="form-label d-block">Facteur déficitaire autre que le fibrinogène :</label>
  <div class="d-flex align-items-center">
    <label class="form-label mb-0 me-2" for="field_facteurDeficitaireAutre">Facteur (V, X, II) :</label>
    <input
      type="text"
      class="form-control w-auto me-2"
      name="facteurDeficitaireAutre"
      id="field_facteurDeficitaireAutre"
      data-cy="facteurDeficitaireAutre"
      formControlName="facteurDeficitaireAutre"
    />
    <label class="form-label mb-0 me-2" for="field_tauxFacteurDeficitaireAutre">Taux</label>
    <input
      type="number"
      class="form-control w-auto me-2"
      name="tauxFacteurDeficitaireAutre"
      id="field_tauxFacteurDeficitaireAutre"
      data-cy="tauxFacteurDeficitaireAutre"
      formControlName="tauxFacteurDeficitaireAutre"
    />
    <span>%</span>
  </div>
</div>

<!-- Dosage des autres facteurs -->
<div class="mb-3">
  <label class="form-label d-block">Dosage des autres facteurs :</label>

  <!-- Ligne 1 -->
  <div class="d-flex align-items-center mb-2">
    <label class="form-label mb-0 me-2" for="field_facteurSupplementaire1">
      Facteur(s) (VII, V, X, II, IX, VIII, IX, XI, XII, FXIII)
    </label>
    <input
      type="text"
      class="form-control w-auto me-2"
      name="facteurSupplementaire1"
      id="field_facteurSupplementaire1"
      data-cy="facteurSupplementaire1"
      formControlName="facteurSupplementaire1"
    />
    <label class="form-label mb-0 me-2" for="field_tauxSupplementaire1">Taux</label>
    <input
      type="number"
      class="form-control w-auto me-2"
      name="tauxSupplementaire1"
      id="field_tauxSupplementaire1"
      data-cy="tauxSupplementaire1"
      formControlName="tauxSupplementaire1"
    />
    <span>%</span>
  </div>

  <!-- Ligne 2 -->
  <div class="d-flex align-items-center mb-2">
    <label class="form-label mb-0 me-2" for="field_facteurSupplementaire2">
      + (VII, V, X, II, IX, VIII, IX, XI, XII, FXIII)
    </label>
    <input
      type="text"
      class="form-control w-auto me-2"
      name="facteurSupplementaire2"
      id="field_facteurSupplementaire2"
      data-cy="facteurSupplementaire2"
      formControlName="facteurSupplementaire2"
    />
    <label class="form-label mb-0 me-2" for="field_tauxSupplementaire2">Taux</label>
    <input
      type="number"
      class="form-control w-auto me-2"
      name="tauxSupplementaire2"
      id="field_tauxSupplementaire2"
      data-cy="tauxSupplementaire2"
      formControlName="tauxSupplementaire2"
    />
    <span>%</span>
  </div>

  <!-- Ligne 3 -->
  <div class="d-flex align-items-center">
    <label class="form-label mb-0 me-2" for="field_facteurSupplementaire3">
      + (VII, V, X, II, IX, VIII, IX, XI, XII, FXIII)
    </label>
    <input
      type="text"
      class="form-control w-auto me-2"
      name="facteurSupplementaire3"
      id="field_facteurSupplementaire3"
      data-cy="facteurSupplementaire3"
      formControlName="facteurSupplementaire3"
    />
    <label class="form-label mb-0 me-2" for="field_tauxSupplementaire3">Taux</label>
    <input
      type="number"
      class="form-control w-auto me-2"
      name="tauxSupplementaire3"
      id="field_tauxSupplementaire3"
      data-cy="tauxSupplementaire3"
      formControlName="tauxSupplementaire3"
    />
    <span>%</span>
  </div>
</div>


<!-- Confirmation Moléculaire -->
<div class="mb-3 d-flex align-items-center">
  <input
    type="checkbox"
    class="form-check"
    name="confirmationMoleculaire"
    id="field_confirmationMoleculaire"
    data-cy="confirmationMoleculaire"
    formControlName="confirmationMoleculaire"
  />
  <label class="form-label ms-2 mb-0" for="field_confirmationMoleculaire">
    Confirmation Moléculaire
  </label>
</div>

<!-- Mutation Présente -->
<div
  class="mb-3 d-flex align-items-center"
  *ngIf="editForm.get('confirmationMoleculaire')?.value"
>
  <input
    type="checkbox"
    class="form-check"
    name="mutationPresente"
    id="field_mutationPresente"
    data-cy="mutationPresente"
    formControlName="mutationPresente"
  />
  <label class="form-label ms-2 mb-0" for="field_mutationPresente">
    Mutation Présente
  </label>
</div>

<!-- Mutation Nom -->
<div
  class="mb-3"
  *ngIf="editForm.get('mutationPresente')?.value"
>
  @let mutationNomRef = editForm.get('mutationNom')!;
  <label class="form-label" for="field_mutationNom">Mutation Nom</label>
  <input
    type="text"
    class="form-control"
    name="mutationNom"
    id="field_mutationNom"
    data-cy="mutationNom"
    formControlName="mutationNom"
  />
  @if (mutationNomRef.invalid && (mutationNomRef.dirty || mutationNomRef.touched)) {
    <div>
      @if (mutationNomRef.errors?.maxlength) {
        <small class="form-text text-danger">Ce champ doit faire moins de 255 caractères.</small>
      }
    </div>
  }
</div>

<!-- Mutation Type -->
<div
  class="mb-3"
  *ngIf="editForm.get('mutationPresente')?.value"
>
  <label class="form-label" for="field_mutationType">Mutation Type</label>
  <select
    class="form-control"
    name="mutationType"
    formControlName="mutationType"
    id="field_mutationType"
    data-cy="mutationType"
  >
    <option [ngValue]="null"></option>
    @for (mutationType of mutationTypeValues; track $index) {
      <option [value]="mutationType">
        {{ { null: '', HETEROZYGOTE: 'HETEROZYGOTE', HOMOZYGOTE: 'HOMOZYGOTE', AUCUNE: 'AUCUNE' }[mutationType] }}
      </option>
    }
  </select>
</div>

<!-- Mutation 2 Nom -->
<div
  class="mb-3"
  *ngIf="editForm.get('mutationPresente')?.value"
>
  @let mutation2NomRef = editForm.get('mutation2Nom')!;
  <label class="form-label" for="field_mutation2Nom">Mutation 2 Nom</label>
  <input
    type="text"
    class="form-control"
    name="mutation2Nom"
    id="field_mutation2Nom"
    data-cy="mutation2Nom"
    formControlName="mutation2Nom"
  />
  @if (mutation2NomRef.invalid && (mutation2NomRef.dirty || mutation2NomRef.touched)) {
    <div>
      @if (mutation2NomRef.errors?.maxlength) {
        <small class="form-text text-danger">Ce champ doit faire moins de 255 caractères.</small>
      }
    </div>
  }
</div>

            <div class="mb-2">
  <label class="fw-bold d-block">Sérologies initiales :</label>
</div>
      
        <div class="mb-3">
          <label class="form-label" for="field_serologieVHB">Sérologie VHB</label>
          <select class="form-control" name="serologieVHB" formControlName="serologieVHB" id="field_serologieVHB" data-cy="serologieVHB">
            <option [ngValue]="null"></option>
            @for (serologieStatut of serologieStatutValues; track $index) {
              <option [value]="serologieStatut">
                {{ { null: '', POSITIVE: 'POSITIVE', NEGATIVE: 'NEGATIVE', NON_FAITE: 'NON_FAITE', NP: 'NP' }[serologieStatut] }}
              </option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_serologieVHC">Sérologie VHC</label>
          <select class="form-control" name="serologieVHC" formControlName="serologieVHC" id="field_serologieVHC" data-cy="serologieVHC">
            <option [ngValue]="null"></option>
            @for (serologieStatut of serologieStatutValues; track $index) {
              <option [value]="serologieStatut">
                {{ { null: '', POSITIVE: 'POSITIVE', NEGATIVE: 'NEGATIVE', NON_FAITE: 'NON_FAITE', NP: 'NP' }[serologieStatut] }}
              </option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_serologieVIH">Sérologie VIH</label>
          <select class="form-control" name="serologieVIH" formControlName="serologieVIH" id="field_serologieVIH" data-cy="serologieVIH">
            <option [ngValue]="null"></option>
            @for (serologieStatut of serologieStatutValues; track $index) {
              <option [value]="serologieStatut">
                {{ { null: '', POSITIVE: 'POSITIVE', NEGATIVE: 'NEGATIVE', NON_FAITE: 'NON_FAITE', NP: 'NP' }[serologieStatut] }}
              </option>
            }
          </select>
        </div>


      

    </div>
  </div>
</div>

<!-- Accordéon Section 5: MANIFESTATIONS CLINIQUES -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingManifestationsCliniques">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseManifestationsCliniques"
      aria-expanded="false"
      aria-controls="collapseManifestationsCliniques"
    >
      Manifestations Cliniques
    </button>
  </h2>
  <div
    id="collapseManifestationsCliniques"
    class="accordion-collapse collapse"
    aria-labelledby="headingManifestationsCliniques"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section MANIFESTATIONS CLINIQUES -->

            <div class="mb-2">
  <label class="fw-bold d-block">1. Manifestations hémorragiques :</label>
</div>
      
      
            <div class="mb-2">
  <label class="fw-bold d-block">a. Hémorragies cutanéo-muqueuses :</label>
</div>

      

<div class="mb-3 d-flex align-items-center">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="epistaxis"
    id="field_epistaxis"
    data-cy="epistaxis"
    formControlName="epistaxis"
  />
  
  <!-- Label Epistaxis -->
  <label class="form-label ms-2 mb-0 me-3" for="field_epistaxis">
    Epistaxis
  </label>

  <!-- Champ fréquence conditionnel -->
  <div *ngIf="editForm.get('epistaxis')?.value" class="flex-grow-1">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence Epistaxis"
      name="frequenceEpistaxis"
      id="field_frequenceEpistaxis"
      data-cy="frequenceEpistaxis"
      formControlName="frequenceEpistaxis"
    />
  </div>
</div>


<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="gingivorragies"
    id="field_gingivorragies"
    data-cy="gingivorragies"
    formControlName="gingivorragies"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_gingivorragies">
    Gingivorragies
  </label>

  <!-- Type + Fréquence : affichés si cochée -->
  <ng-container *ngIf="editForm.get('gingivorragies')?.value">
    <select
      class="form-control me-2"
      name="typeGingivorragies"
      formControlName="typeGingivorragies"
      id="field_typeGingivorragies"
      data-cy="typeGingivorragies"
    >
      <option [ngValue]="null"></option>
      @for (typeManifestation of typeManifestationValues; track $index) {
        <option [value]="typeManifestation">
          {{ { null: '', SPONTANE: 'SPONTANÉ', PROVOQUE: 'PROVOQUÉ' }[typeManifestation] }}
        </option>
      }
    </select>

    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceGingivorragies"
      id="field_frequenceGingivorragies"
      data-cy="frequenceGingivorragies"
      formControlName="frequenceGingivorragies"
    />
  </ng-container>
</div>


<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="ecchymose"
    id="field_ecchymose"
    data-cy="ecchymose"
    formControlName="ecchymose"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_ecchymose">
    Ecchymose
  </label>

  <!-- Champs conditionnels -->
  <ng-container *ngIf="editForm.get('ecchymose')?.value">
    <select
      class="form-control me-2"
      name="typeEcchymose"
      formControlName="typeEcchymose"
      id="field_typeEcchymose"
      data-cy="typeEcchymose"
    >
      <option [ngValue]="null"></option>
      @for (typeManifestation of typeManifestationValues; track $index) {
        <option [value]="typeManifestation">
          {{ { null: '', SPONTANE: 'SPONTANÉ', PROVOQUE: 'PROVOQUÉ' }[typeManifestation] }}
        </option>
      }
    </select>

    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceEcchymose"
      id="field_frequenceEcchymose"
      data-cy="frequenceEcchymose"
      formControlName="frequenceEcchymose"
    />
  </ng-container>
</div>


<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="menorragie"
    id="field_menorragie"
    data-cy="menorragie"
    formControlName="menorragie"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_menorragie">
    Ménorragie
  </label>

  <!-- Champ fréquence (conditionnel) -->
  <ng-container *ngIf="editForm.get('menorragie')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceMenorragie"
      id="field_frequenceMenorragie"
      data-cy="frequenceMenorragie"
      formControlName="frequenceMenorragie"
    />
  </ng-container>
</div>


<!-- Titre de section -->
<div class="mb-2">
  <label class="fw-bold d-block">b. Hémorragies viscérales et profondes</label>
</div>

<!-- Hématémèse + fréquence sur une ligne -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="hematemese"
    id="field_hematemese"
    data-cy="hematemese"
    formControlName="hematemese"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_hematemese">
    Hématémèse
  </label>

  <!-- Champ fréquence conditionnel -->
  <ng-container *ngIf="editForm.get('hematemese')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHematemese"
      id="field_frequenceHematemese"
      data-cy="frequenceHematemese"
      formControlName="frequenceHematemese"
    />
  </ng-container>
</div>


<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="rectorragie"
    id="field_rectorragie"
    data-cy="rectorragie"
    formControlName="rectorragie"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_rectorragie">
    Rectorragie
  </label>

  <!-- Champ conditionnel -->
  <ng-container *ngIf="editForm.get('rectorragie')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceRectorragie"
      id="field_frequenceRectorragie"
      data-cy="frequenceRectorragie"
      formControlName="frequenceRectorragie"
    />
  </ng-container>
</div>


<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="hematurie"
    id="field_hematurie"
    data-cy="hematurie"
    formControlName="hematurie"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_hematurie">
    Hématurie
  </label>

  <!-- Champ fréquence (visible seulement si case cochée) -->
  <ng-container *ngIf="editForm.get('hematurie')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHematurie"
      id="field_frequenceHematurie"
      data-cy="frequenceHematurie"
      formControlName="frequenceHematurie"
    />
  </ng-container>
</div>

<!-- Hemorragie Post Traumatique + fréquence sur une ligne -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="hemorragiePostTraumatique"
    id="field_hemorragiePostTraumatique"
    data-cy="hemorragiePostTraumatique"
    formControlName="hemorragiePostTraumatique"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_hemorragiePostTraumatique">
    Hémorragie Post Traumatique
  </label>

  <!-- Champ fréquence conditionnel -->
  <ng-container *ngIf="editForm.get('hemorragiePostTraumatique')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHemorragiePostTraumatique"
      id="field_frequenceHemorragiePostTraumatique"
      data-cy="frequenceHemorragiePostTraumatique"
      formControlName="frequenceHemorragiePostTraumatique"
    />
  </ng-container>
</div>


<!-- Hématome Sous-Cutané + Type + Fréquence sur une ligne -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="hematomeSousCutane"
    id="field_hematomeSousCutane"
    data-cy="hematomeSousCutane"
    formControlName="hematomeSousCutane"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_hematomeSousCutane">
    Hématome Sous-Cutané
  </label>

  <!-- Champs conditionnels -->
  <ng-container *ngIf="editForm.get('hematomeSousCutane')?.value">
    <!-- Type -->
    <select
      class="form-control"
      name="typeHematomeSousCutane"
      formControlName="typeHematomeSousCutane"
      id="field_typeHematomeSousCutane"
      data-cy="typeHematomeSousCutane"
    >
      <option [ngValue]="null"></option>
      @for (typeManifestation of typeManifestationValues; track $index) {
        <option [value]="typeManifestation">
          {{ { null: '', SPONTANE: 'SPONTANÉ', PROVOQUE: 'PROVOQUÉ' }[typeManifestation] }}
        </option>
      }
    </select>

    <!-- Fréquence -->
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHematomeSousCutane"
      id="field_frequenceHematomeSousCutane"
      data-cy="frequenceHematomeSousCutane"
      formControlName="frequenceHematomeSousCutane"
    />
  </ng-container>
</div>


<!-- Hématome Musculaire + Type + Fréquence sur une ligne -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="hematomeMusculaire"
    id="field_hematomeMusculaire"
    data-cy="hematomeMusculaire"
    formControlName="hematomeMusculaire"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_hematomeMusculaire">
    Hématome Musculaire
  </label>

  <!-- Champs conditionnels -->
  <ng-container *ngIf="editForm.get('hematomeMusculaire')?.value">
    <!-- Type -->
    <select
      class="form-control"
      name="typeHematomeMusculaire"
      formControlName="typeHematomeMusculaire"
      id="field_typeHematomeMusculaire"
      data-cy="typeHematomeMusculaire"
    >
      <option [ngValue]="null"></option>
      @for (typeManifestation of typeManifestationValues; track $index) {
        <option [value]="typeManifestation">
          {{ { null: '', SPONTANE: 'SPONTANÉ', PROVOQUE: 'PROVOQUÉ' }[typeManifestation] }}
        </option>
      }
    </select>

    <!-- Fréquence -->
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHematomeMusculaire"
      id="field_frequenceHematomeMusculaire"
      data-cy="frequenceHematomeMusculaire"
      formControlName="frequenceHematomeMusculaire"
    />
  </ng-container>
</div>


<!-- Hématome Tissus Mous Profonds -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="hematomeTissusMousProfonds"
    id="field_hematomeTissusMousProfonds"
    data-cy="hematomeTissusMousProfonds"
    formControlName="hematomeTissusMousProfonds"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_hematomeTissusMousProfonds">
    Hématome Tissus Mous Profonds
  </label>

  <!-- Champs visibles uniquement si coché -->
  <ng-container *ngIf="editForm.get('hematomeTissusMousProfonds')?.value">
    <!-- Type -->
    <select
      class="form-control"
      name="typeHematomeTissusMousProfonds"
      formControlName="typeHematomeTissusMousProfonds"
      id="field_typeHematomeTissusMousProfonds"
      data-cy="typeHematomeTissusMousProfonds"
    >
      <option [ngValue]="null"></option>
      @for (typeManifestation of typeManifestationValues; track $index) {
        <option [value]="typeManifestation">
          {{ { null: '', SPONTANE: 'SPONTANÉ', PROVOQUE: 'PROVOQUÉ' }[typeManifestation] }}
        </option>
      }
    </select>

    <!-- Fréquence -->
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHematomeTissusMousProfonds"
      id="field_frequenceHematomeTissusMousProfonds"
      data-cy="frequenceHematomeTissusMousProfonds"
      formControlName="frequenceHematomeTissusMousProfonds"
    />
  </ng-container>
</div>


<!-- Hémarthrose -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="hemarthrose"
    id="field_hemarthrose"
    data-cy="hemarthrose"
    formControlName="hemarthrose"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_hemarthrose">
    Hémarthrose
  </label>

  <!-- Champs conditionnels si case cochée -->
  <ng-container *ngIf="editForm.get('hemarthrose')?.value">
    <!-- Type -->
    <select
      class="form-control"
      name="typeHemarthrose"
      formControlName="typeHemarthrose"
      id="field_typeHemarthrose"
      data-cy="typeHemarthrose"
    >
      <option [ngValue]="null"></option>
      @for (typeManifestation of typeManifestationValues; track $index) {
        <option [value]="typeManifestation">
          {{ { null: '', SPONTANE: 'SPONTANÉ', PROVOQUE: 'PROVOQUÉ' }[typeManifestation] }}
        </option>
      }
    </select>

    <!-- Fréquence -->
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHemarthrose"
      id="field_frequenceHemarthrose"
      data-cy="frequenceHemarthrose"
      formControlName="frequenceHemarthrose"
    />
  </ng-container>
</div>


<!-- Saignement SNC -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="saignementSNC"
    id="field_saignementSNC"
    data-cy="saignementSNC"
    formControlName="saignementSNC"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_saignementSNC">
    Saignement SNC
  </label>

  <!-- Champs conditionnels si coché -->
  <ng-container *ngIf="editForm.get('saignementSNC')?.value">
    <!-- Type -->
    <select
      class="form-control"
      name="typeSaignementSNC"
      formControlName="typeSaignementSNC"
      id="field_typeSaignementSNC"
      data-cy="typeSaignementSNC"
    >
      <option [ngValue]="null"></option>
      @for (typeManifestation of typeManifestationValues; track $index) {
        <option [value]="typeManifestation">
          {{ { null: '', SPONTANE: 'SPONTANÉ', PROVOQUE: 'PROVOQUÉ' }[typeManifestation] }}
        </option>
      }
    </select>

    <!-- Fréquence -->
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceSaignementSNC"
      id="field_frequenceSaignementSNC"
      data-cy="frequenceSaignementSNC"
      formControlName="frequenceSaignementSNC"
    />
  </ng-container>
</div>


<!-- Saignement Chute Cordon -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="saignementChuteCordon"
    id="field_saignementChuteCordon"
    data-cy="saignementChuteCordon"
    formControlName="saignementChuteCordon"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_saignementChuteCordon">
    Saignement Chute Cordon
  </label>

  <!-- Champ Fréquence conditionnel -->
  <ng-container *ngIf="editForm.get('saignementChuteCordon')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceSaignementChuteCordon"
      id="field_frequenceSaignementChuteCordon"
      data-cy="frequenceSaignementChuteCordon"
      formControlName="frequenceSaignementChuteCordon"
    />
  </ng-container>
</div>


<!-- Retard Cicatrisation Plaies -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <!-- Checkbox -->
  <input
    type="checkbox"
    class="form-check"
    name="retardCicatrisationPlaies"
    id="field_retardCicatrisationPlaies"
    data-cy="retardCicatrisationPlaies"
    formControlName="retardCicatrisationPlaies"
  />

  <!-- Label -->
  <label class="form-label ms-2 mb-0 me-3" for="field_retardCicatrisationPlaies">
    Retard Cicatrisation Plaies
  </label>

  <!-- Champ Fréquence conditionnel -->
  <ng-container *ngIf="editForm.get('retardCicatrisationPlaies')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceRetardCicatrisationPlaies"
      id="field_frequenceRetardCicatrisationPlaies"
      data-cy="frequenceRetardCicatrisationPlaies"
      formControlName="frequenceRetardCicatrisationPlaies"
    />
  </ng-container>
</div>

                        <div class="mb-2">
  <label class="fw-bold d-block">2. Autres manifestations :</label>
</div>

        <!--div class="mb-3">
          <label class="form-label" for="field_autresManifestations">Autres Manifestations</label>
          <input
            type="checkbox"
            class="form-check"
            name="autresManifestations"
            id="field_autresManifestations"
            data-cy="autresManifestations"
            formControlName="autresManifestations"
          />
    </div-->

<!-- Fausses couches spontanées récidivantes -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <input
    type="checkbox"
    class="form-check"
    name="faussesCouchesSpontaneesRecurrence"
    id="field_faussesCouchesSpontaneesRecurrence"
    data-cy="faussesCouchesSpontaneesRecurrence"
    formControlName="faussesCouchesSpontaneesRecurrence"
  />
  <label class="form-label ms-2 mb-0 me-3" for="field_faussesCouchesSpontaneesRecurrence">
    Fausses Couches Spontanées Récurrentes
  </label>
  <ng-container *ngIf="editForm.get('faussesCouchesSpontaneesRecurrence')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceFaussesCouches"
      id="field_frequenceFaussesCouches"
      data-cy="frequenceFaussesCouches"
      formControlName="frequenceFaussesCouches"
    />
  </ng-container>
</div>

<!-- Accidents thrombotiques -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <input
    type="checkbox"
    class="form-check"
    name="accidentsThrombotiques"
    id="field_accidentsThrombotiques"
    data-cy="accidentsThrombotiques"
    formControlName="accidentsThrombotiques"
  />
  <label class="form-label ms-2 mb-0 me-3" for="field_accidentsThrombotiques">
    Accidents Thrombotiques
  </label>
  <ng-container *ngIf="editForm.get('accidentsThrombotiques')?.value">
    <input
      type="checkbox"
      class="form-check"
      name="thromboseVeineuse"
      id="field_thromboseVeineuse"
      data-cy="thromboseVeineuse"
      formControlName="thromboseVeineuse"
    />
    <label class="form-label ms-2 me-3 mb-0" for="field_thromboseVeineuse">Thrombose Veineuse</label>

    <input
      type="checkbox"
      class="form-check"
      name="thromboseArterielle"
      id="field_thromboseArterielle"
      data-cy="thromboseArterielle"
      formControlName="thromboseArterielle"
    />
    <label class="form-label ms-2 me-3 mb-0" for="field_thromboseArterielle">Thrombose Artérielle</label>

    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceAccidentsThrombotiques"
      id="field_frequenceAccidentsThrombotiques"
      data-cy="frequenceAccidentsThrombotiques"
      formControlName="frequenceAccidentsThrombotiques"
    />
  </ng-container>
</div>

<!-- Hémopéritoine -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <input
    type="checkbox"
    class="form-check"
    name="hemoperitoine"
    id="field_hemoperitoine"
    data-cy="hemoperitoine"
    formControlName="hemoperitoine"
  />
  <label class="form-label ms-2 mb-0 me-3" for="field_hemoperitoine">
    Hémopéritoine
  </label>
  <ng-container *ngIf="editForm.get('hemoperitoine')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHemoperitoine"
      id="field_frequenceHemoperitoine"
      data-cy="frequenceHemoperitoine"
      formControlName="frequenceHemoperitoine"
    />
  </ng-container>
</div>

<!-- Rupture kystes hémorragiques -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <input
    type="checkbox"
    class="form-check"
    name="ruptureKystesHemorragiques"
    id="field_ruptureKystesHemorragiques"
    data-cy="ruptureKystesHemorragiques"
    formControlName="ruptureKystesHemorragiques"
  />
  <label class="form-label ms-2 mb-0 me-3" for="field_ruptureKystesHemorragiques">
    Rupture Kystes Hémorragiques
  </label>
  <ng-container *ngIf="editForm.get('ruptureKystesHemorragiques')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceRuptureKystes"
      id="field_frequenceRuptureKystes"
      data-cy="frequenceRuptureKystes"
      formControlName="frequenceRuptureKystes"
    />
  </ng-container>
</div>

<!-- Hémorragie grave -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <input
    type="checkbox"
    class="form-check"
    name="hemorragieGrave"
    id="field_hemorragieGrave"
    data-cy="hemorragieGrave"
    formControlName="hemorragieGrave"
  />
  <label class="form-label ms-2 mb-0 me-3" for="field_hemorragieGrave">
    Hémorragie Grave
  </label>
  <ng-container *ngIf="editForm.get('hemorragieGrave')?.value">
    <input
      type="number"
      class="form-control"
      placeholder="Fréquence"
      name="frequenceHemorragieGrave"
      id="field_frequenceHemorragieGrave"
      data-cy="frequenceHemorragieGrave"
      formControlName="frequenceHemorragieGrave"
    />
  </ng-container>
</div>

<!-- Gravité - critères -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-2">
  <input
    type="checkbox"
    class="form-check"
    name="graviteDeglobulisation"
    id="field_graviteDeglobulisation"
    data-cy="graviteDeglobulisation"
    formControlName="graviteDeglobulisation"
  />
  <label class="form-label ms-2 me-3 mb-0" for="field_graviteDeglobulisation">Dégobulisation</label>

  <input
    type="checkbox"
    class="form-check"
    name="graviteEtatDeChoc"
    id="field_graviteEtatDeChoc"
    data-cy="graviteEtatDeChoc"
    formControlName="graviteEtatDeChoc"
  />
  <label class="form-label ms-2 me-3 mb-0" for="field_graviteEtatDeChoc">État de choc</label>

  <input
    type="checkbox"
    class="form-check"
    name="graviteParLocalisation"
    id="field_graviteParLocalisation"
    data-cy="graviteParLocalisation"
    formControlName="graviteParLocalisation"
  />
  <label class="form-label ms-2 me-3 mb-0" for="field_graviteParLocalisation">Par localisation</label>
</div>

<!-- Siège de la localisation grave -->
<ng-container *ngIf="editForm.get('graviteParLocalisation')?.value">
  @let siegeGraviteLocalisationRef = editForm.get('siegeGraviteLocalisation')!;
  <div class="mb-3">
    <label class="form-label" for="field_siegeGraviteLocalisation">Siège de la localisation grave</label>
    <input
      type="text"
      class="form-control"
      name="siegeGraviteLocalisation"
      id="field_siegeGraviteLocalisation"
      data-cy="siegeGraviteLocalisation"
      formControlName="siegeGraviteLocalisation"
    />
    @if (siegeGraviteLocalisationRef.invalid && (siegeGraviteLocalisationRef.dirty || siegeGraviteLocalisationRef.touched)) {
      <div>
        @if (siegeGraviteLocalisationRef.errors?.maxlength) {
          <small class="form-text text-danger">Ce champ doit faire moins de 255 caractères.</small>
        }
      </div>
    }
  </div>
</ng-container>

                        <div class="mb-2">
  <label class="fw-bold d-block">3. Chirurgies et circoncision :</label>
</div>

        <div class="mb-3">
          <label class="form-label" for="field_chirurgiePrepare">Chirurgie Patient préparé :</label>
          <select
            class="form-control"
            name="chirurgiePrepare"
            formControlName="chirurgiePrepare"
            id="field_chirurgiePrepare"
            data-cy="chirurgiePrepare"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_chirurgieSuiteHemorragique">Suite opératoire hémorragique</label>
          <select
            class="form-control"
            name="chirurgieSuiteHemorragique"
            formControlName="chirurgieSuiteHemorragique"
            id="field_chirurgieSuiteHemorragique"
            data-cy="chirurgieSuiteHemorragique"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_circoncisionPrepare">Circoncision Patient préparé :</label>
          <select
            class="form-control"
            name="circoncisionPrepare"
            formControlName="circoncisionPrepare"
            id="field_circoncisionPrepare"
            data-cy="circoncisionPrepare"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_circoncisionSuiteHemorragique">Circoncision Suite opératoire hémorragique :</label>
          <select
            class="form-control"
            name="circoncisionSuiteHemorragique"
            formControlName="circoncisionSuiteHemorragique"
            id="field_circoncisionSuiteHemorragique"
            data-cy="circoncisionSuiteHemorragique"
          >
            <option [ngValue]="null"></option>
            @for (ouiNonNP of ouiNonNPValues; track $index) {
              <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
            }
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label" for="field_ageCirconcision">Age au moment de la circoncision :</label>
          <input
            type="number"
            class="form-control"
            name="ageCirconcision"
            id="field_ageCirconcision"
            data-cy="ageCirconcision"
            formControlName="ageCirconcision"
          />
        </div>



                </div>
  </div>
</div>

<!-- Accordéon Section 9: Prise en charge thérapeutique -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingPriseEnChargeTh">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapsePriseEnChargeTh"
      aria-expanded="false"
      aria-controls="collapsePriseEnChargeTh"
    >
      Prise en charge thérapeutique
    </button>
  </h2>
  <div
    id="collapsePriseEnChargeTh"
    class="accordion-collapse collapse"
    aria-labelledby="headingPriseEnChargeTh"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Prise en charge thérapeutique -->





                              <div class="mb-2">
  <label class="fw-bold d-block">1. Le traitement substitutif :</label>
</div>

      

<!-- Traitement substitutif -->
<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_traitementPFC">PFC</label>
  <select class="form-control" name="traitementPFC" formControlName="traitementPFC" id="field_traitementPFC" data-cy="traitementPFC">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_traitementCryoprecipite">Cryoprécipité</label>
  <select class="form-control" name="traitementCryoprecipite" formControlName="traitementCryoprecipite" id="field_traitementCryoprecipite" data-cy="traitementCryoprecipite">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_traitementConcentreFacteurXI">Concentré Facteur</label>
  <select class="form-control" name="traitementConcentreFacteurXI" formControlName="traitementConcentreFacteurXI" id="field_traitementConcentreFacteurXI" data-cy="traitementConcentreFacteurXI">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_traitementCulotsPlaquettaires">Culots Plaquettaires</label>
  <select class="form-control" name="traitementCulotsPlaquettaires" formControlName="traitementCulotsPlaquettaires" id="field_traitementCulotsPlaquettaires" data-cy="traitementCulotsPlaquettaires">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Titre: traitement adjuvant -->
<div class="mb-2">
  <label class="fw-bold d-block">2. Le traitement adjuvant :</label>
</div>

<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_traitementDicynone">Dicynone</label>
  <select class="form-control" name="traitementDicynone" formControlName="traitementDicynone" id="field_traitementDicynone" data-cy="traitementDicynone">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_traitementExacyl">Exacyl</label>
  <select class="form-control" name="traitementExacyl" formControlName="traitementExacyl" id="field_traitementExacyl" data-cy="traitementExacyl">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_traitementMartial">Martial</label>
  <select class="form-control" name="traitementMartial" formControlName="traitementMartial" id="field_traitementMartial" data-cy="traitementMartial">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_traitementOestroprogestatif">Oestroprogestatif</label>
  <select class="form-control" name="traitementOestroprogestatif" formControlName="traitementOestroprogestatif" id="field_traitementOestroprogestatif" data-cy="traitementOestroprogestatif">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label me-2 mb-0" for="field_transfusionCGR">Transfusion CGR</label>
  <select class="form-control" name="transfusionCGR" formControlName="transfusionCGR" id="field_transfusionCGR" data-cy="transfusionCGR">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Titre: Complications -->



                              <div class="mb-2">
  <label class="fw-bold d-block">3. Complications liées au traitement :</label>
</div>

      
<!-- Inhibiteurs -->
<div class="mb-3">
  <label class="form-label" for="field_inhibiteurs">Inhibiteurs</label>
  <select
    class="form-control"
    name="inhibiteurs"
    formControlName="inhibiteurs"
    id="field_inhibiteurs"
    data-cy="inhibiteurs"
  >
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">
        {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
      </option>
    }
  </select>
</div>

<!-- Bloc conditionnel si inhibiteurs == OUI -->
<ng-container *ngIf="editForm.get('inhibiteurs')?.value === 'OUI'">

  <!-- Neutralisant & Non Neutralisant sur la même ligne -->
  <div class="mb-3 d-flex align-items-center flex-wrap gap-4">
    <!-- Checkbox Neutralisant -->
    <div class="d-flex align-items-center">
      <input
        type="checkbox"
        class="form-check"
        name="inhibiteurNeutralisant"
        id="field_inhibiteurNeutralisant"
        data-cy="inhibiteurNeutralisant"
        formControlName="inhibiteurNeutralisant"
      />
      <label class="form-label ms-2 mb-0" for="field_inhibiteurNeutralisant">
        Inhibiteur Neutralisant
      </label>
    </div>

    <!-- Checkbox Non Neutralisant -->
    <div class="d-flex align-items-center">
      <input
        type="checkbox"
        class="form-check"
        name="inhibiteurNonNeutralisant"
        id="field_inhibiteurNonNeutralisant"
        data-cy="inhibiteurNonNeutralisant"
        formControlName="inhibiteurNonNeutralisant"
      />
      <label class="form-label ms-2 mb-0" for="field_inhibiteurNonNeutralisant">
        Inhibiteur Non Neutralisant
      </label>
    </div>
  </div>

  <!-- Champ titre si neutralisant coché -->
  <div class="mb-3" *ngIf="editForm.get('inhibiteurNeutralisant')?.value">
    <label class="form-label" for="field_titreInhibiteurNeutralisant">
      Titre Inhibiteur Neutralisant
    </label>
    <input
      type="number"
      class="form-control"
      name="titreInhibiteurNeutralisant"
      id="field_titreInhibiteurNeutralisant"
      data-cy="titreInhibiteurNeutralisant"
      formControlName="titreInhibiteurNeutralisant"
    />
  </div>

</ng-container>




<!-- Infections Virales -->
<div class="mb-3">
  <label class="form-label" for="field_infectionsVirales">Infections Virales</label>
  <select
    class="form-control"
    name="infectionsVirales"
    formControlName="infectionsVirales"
    id="field_infectionsVirales"
    data-cy="infectionsVirales"
  >
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">
        {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
      </option>
    }
  </select>
</div>

<!-- Autres champs affichés seulement si infectionsVirales == OUI -->
<ng-container *ngIf="editForm.get('infectionsVirales')?.value === 'OUI'">

  <!-- Hépatite B -->
  <div class="mb-3">
    <label class="form-label" for="field_hepatiteB">Hépatite B</label>
    <select
      class="form-control"
      name="hepatiteB"
      formControlName="hepatiteB"
      id="field_hepatiteB"
      data-cy="hepatiteB"
    >
      <option [ngValue]="null"></option>
      @for (ouiNonNP of ouiNonNPValues; track $index) {
        <option [value]="ouiNonNP">
          {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
        </option>
      }
    </select>
  </div>

  <!-- Hépatite C -->
  <div class="mb-3">
    <label class="form-label" for="field_hepatiteC">Hépatite C</label>
    <select
      class="form-control"
      name="hepatiteC"
      formControlName="hepatiteC"
      id="field_hepatiteC"
      data-cy="hepatiteC"
    >
      <option [ngValue]="null"></option>
      @for (ouiNonNP of ouiNonNPValues; track $index) {
        <option [value]="ouiNonNP">
          {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
        </option>
      }
    </select>
  </div>

  <!-- VIH -->
  <div class="mb-3">
    <label class="form-label" for="field_vih">VIH</label>
    <select
      class="form-control"
      name="vih"
      formControlName="vih"
      id="field_vih"
      data-cy="vih"
    >
      <option [ngValue]="null"></option>
      @for (ouiNonNP of ouiNonNPValues; track $index) {
        <option [value]="ouiNonNP">
          {{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}
        </option>
      }
    </select>
  </div>

</ng-container>


<!-- Groupe de complications sur une seule ligne avec checkbox avant le texte -->
<div class="mb-3 d-flex align-items-center flex-wrap gap-4">
  <!-- Thrombose -->
  <div class="form-check d-flex align-items-center">
    <input
      type="checkbox"
      class="form-check-input me-2"
      name="thrombose"
      id="field_thrombose"
      data-cy="thrombose"
      formControlName="thrombose"
    />
    <label class="form-check-label mb-0" for="field_thrombose">Thrombose</label>
  </div>

  <!-- Réaction Allergique -->
  <div class="form-check d-flex align-items-center">
    <input
      type="checkbox"
      class="form-check-input me-2"
      name="reactionAllergique"
      id="field_reactionAllergique"
      data-cy="reactionAllergique"
      formControlName="reactionAllergique"
    />
    <label class="form-check-label mb-0" for="field_reactionAllergique">Réaction allergique</label>
  </div>

  <!-- Autre Complication -->
  <div class="form-check d-flex align-items-center">
    <input
      type="checkbox"
      class="form-check-input me-2"
      name="autreComplication"
      id="field_autreComplication"
      data-cy="autreComplication"
      formControlName="autreComplication"
    />
    <label class="form-check-label mb-0" for="field_autreComplication">Autre complication</label>
  </div>
</div>

        @let autresComplicationsRef = editForm.get('autresComplications')!;
        <div class="mb-3">
          <label class="form-label" for="field_autresComplications">Autres Complications</label>
          <input
            type="text"
            class="form-control"
            name="autresComplications"
            id="field_autresComplications"
            data-cy="autresComplications"
            formControlName="autresComplications"
          />
          @if (autresComplicationsRef.invalid && (autresComplicationsRef.dirty || autresComplicationsRef.touched)) {
            <div>
              @if (editForm.get('autresComplications')?.errors?.maxlength) {
                <small class="form-text text-danger">Ce champ doit faire moins de 255 caractères.</small>
              }
            </div>
          }
        </div>



      </div>
  </div>
</div>

<!-- Accordéon Section 12: ETAT ACTUEL -->
<div class="accordion-item">
  <h2 class="accordion-header" id="headingEtatActuel">
    <button
      class="accordion-button collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseEtatActuel"
      aria-expanded="false"
      aria-controls="collapseEtatActuel"
    >
      Etat Actuel
    </button>
  </h2>
  <div
    id="collapseEtatActuel"
    class="accordion-collapse collapse"
    aria-labelledby="headingEtatActuel"
    data-bs-parent="#ficheAccordion"
  >
    <div class="accordion-body">
      <!-- Contenu pour la section Etat Actuel -->

<!-- Adhérence Thérapeutique -->
<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label mb-0 me-2" for="field_adherenceTherapeutique">Adhérence Thérapeutique</label>
  <select class="form-control" name="adherenceTherapeutique" formControlName="adherenceTherapeutique" id="field_adherenceTherapeutique" data-cy="adherenceTherapeutique">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

@if (editForm.get('adherenceTherapeutique')?.value === 'NON') {
  <div class="mb-3">
    <label class="form-label" for="field_causeNonAdherence">Cause Non Adhérence</label>
    <input type="text" class="form-control" name="causeNonAdherence" id="field_causeNonAdherence" data-cy="causeNonAdherence" formControlName="causeNonAdherence" />
  </div>
}

<!-- Statut Social -->
<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label mb-0 me-2" for="field_statutSocial">Statut Social</label>
  <select class="form-control" name="statutSocial" formControlName="statutSocial" id="field_statutSocial" data-cy="statutSocial">
    <option [ngValue]="null"></option>
    @for (statutSocial of statutSocialValues; track $index) {
      <option [value]="statutSocial">
        {{ {
          null: '', CHOMEUR: 'CHOMEUR', TRAVAILLE: 'TRAVAILLE',
          SCOLARISE: 'SCOLARISE', PRESCOLARISE: 'PRESCOLARISE'
        }[statutSocial] }}
      </option>
    }
  </select>
</div>

<!-- Marie -->
<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label mb-0 me-2" for="field_marie">Marié</label>
  <select class="form-control" name="marie" formControlName="marie" id="field_marie" data-cy="marie">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Enfants -->
<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label mb-0 me-2" for="field_enfants">Enfants</label>
  <select class="form-control" name="enfants" formControlName="enfants" id="field_enfants" data-cy="enfants">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

<!-- Activité Physique -->
<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label mb-0 me-2" for="field_activitePhysique">Activité Physique</label>
  <select class="form-control" name="activitePhysique" formControlName="activitePhysique" id="field_activitePhysique" data-cy="activitePhysique">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

@if (editForm.get('activitePhysique')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label" for="field_typeActivitePhysique">Type Activité Physique</label>
    <input type="text" class="form-control" name="typeActivitePhysique" id="field_typeActivitePhysique" data-cy="typeActivitePhysique" formControlName="typeActivitePhysique" />
  </div>
}

<!-- Séquelles -->
<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label mb-0 me-2" for="field_sequelles">Séquelles</label>
  <select class="form-control" name="sequelles" formControlName="sequelles" id="field_sequelles" data-cy="sequelles">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

@if (editForm.get('sequelles')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label" for="field_typeSequelles">Type Séquelles</label>
    <input type="text" class="form-control" name="typeSequelles" id="field_typeSequelles" data-cy="typeSequelles" formControlName="typeSequelles" />
  </div>
}

<!-- Patient Décédé -->
<div class="mb-3 d-flex align-items-center gap-2 flex-wrap">
  <label class="form-label mb-0 me-2" for="field_patientDecede">Patient Décédé</label>
  <select class="form-control" name="patientDecede" formControlName="patientDecede" id="field_patientDecede" data-cy="patientDecede">
    <option [ngValue]="null"></option>
    @for (ouiNonNP of ouiNonNPValues; track $index) {
      <option [value]="ouiNonNP">{{ { null: '', OUI: 'OUI', NON: 'NON', NP: 'NP' }[ouiNonNP] }}</option>
    }
  </select>
</div>

@if (editForm.get('patientDecede')?.value === 'OUI') {
  <div class="mb-3">
    <label class="form-label" for="field_dateDeces">Date Décès</label>
    <div class="input-group">
      <input id="field_dateDeces" data-cy="dateDeces" type="text" class="form-control" name="dateDeces" ngbDatepicker #dateDecesDp="ngbDatepicker" formControlName="dateDeces" />
      <button type="button" class="btn btn-secondary" (click)="dateDecesDp.toggle()">
        <fa-icon icon="calendar-alt"></fa-icon>
      </button>
    </div>
  </div>

  <div class="mb-3">
    <label class="form-label" for="field_ageDeces">Âge au Décès</label>
    <input type="number" class="form-control" name="ageDeces" id="field_ageDeces" data-cy="ageDeces" formControlName="ageDeces" />
  </div>

  <!-- Causes du Décès -->
  <div class="mb-3 d-flex flex-wrap gap-4">
    <label class="form-label">Causes du Décès :</label>

    @for (cause of [
      { key: 'causeDecesSNC', label: 'SNC' },
      { key: 'causeDecesAutreHemorragie', label: 'Autre Hémorragie' },
      { key: 'causeDecesVIH', label: 'VIH' },
      { key: 'causeDecesAutreInfection', label: 'Autre Infection' },
      { key: 'causeDecesThromboembolique', label: 'Thromboembolique' },
      { key: 'causeDecesCancer', label: 'Cancer' },
      { key: 'causeDecesCovid19', label: 'Covid-19' },
      { key: 'causeDecesInconnue', label: 'Inconnue' }
    ]; track cause.key) {
      <div class="form-check d-flex align-items-center">
        <input type="checkbox" class="form-check-input me-2" [id]="'field_' + cause.key" [formControlName]="cause.key" />
        <label class="form-check-label mb-0" [for]="'field_' + cause.key">{{ cause.label }}</label>
      </div>
    }
  </div>

  <!-- Autre cause -->
  <div class="mb-3">
    <label class="form-label" for="field_autreCauseDeces">Autre Cause Décès</label>
    <input type="text" class="form-control" name="autreCauseDeces" id="field_autreCauseDeces" data-cy="autreCauseDeces" formControlName="autreCauseDeces" />
  </div>
}


                          <!-- Champs pour les sections  -->
    </div>
              </div>
            </div>
          </div>
        </div>
      <div>
        <button type="button" id="cancel-save" data-cy="entityCreateCancelButton" class="btn btn-secondary" (click)="previousState()">
          <fa-icon icon="ban"></fa-icon>&nbsp;<span>Annuler</span>
        </button>

        <button
          type="submit"
          id="save-entity"
          data-cy="entityCreateSaveButton"
          [disabled]="editForm.invalid || isSaving"
          class="btn btn-primary"
        >
          <fa-icon icon="save"></fa-icon>&nbsp;<span>Sauvegarder</span>
        </button>
      </div>
    </form>
  </div>
</div>
